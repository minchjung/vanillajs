{"version":3,"file":"csr.js","mappings":";;;;;;;;;;;;;;;;;;;;AAA+C;AACR;AACK;AACH;AACA;;AAEzC;AACA,SAAS,2DAAa;AACtB;AACA;AACA;AACA;AACA;AACA,UAAU,4DAAc;AACxB;;AAEA;AACA,kBAAkB,yDAAK;AACvB;AACA,gBAAgB,8DAAG;;AAEnB;AACA,eAAe,sEAA0B;AACzC;AACA;AACA;AACA,CAAC;;;AAGD,mBAAmB,0DAAM;AACzB,iBAAiB,8DAAG;AACpB;AACA;AACA,MAAM;AACN;AACA,KAAK;AACL,MAAM;AACN;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;;;AC7CO;AACP;AACA;;AAEA;AACA;AACA,cAAc,cAAc;AAC5B;AACA,cAAc,uBAAuB;AACrC;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kDAAkD;AACxE;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,cAAc,yCAAyC;AACvD,2BAA2B,OAAO,QAAQ,KAAK,SAAS,MAAM,QAAQ,KAAK,QAAQ,KAAK,SAAS,MAAM;AACvG;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,cAAc,uBAAuB;AACrC;AACA;AACA;AACA;AACA,wBAAwB,oBAAoB,mBAAmB,QAAQ;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,sBAAsB,oBAAoB;AAC1C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,+BAA+B;AACrD,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,qCAAqC;AAC1D;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACnI8C;AACG;AACA;;AAEjD,kBAAkB,yDAAS;;AAE3B,gBAAgB,aAAa;AAC7B,YAAY,aAAa;AACzB,6BAA6B,0DAAY,GAAG,8BAA8B;AAC1E,6BAA6B,0DAAc,GAAG,2BAA2B;AACzE;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA,iEAAe,UAAU,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;ACpBM;AACC;;AAEtC,2BAA2B,yDAAS;AAC3C;AACA,gBAAgB,aAAa;AAC7B,YAAY,aAAa;AACzB;AACA,yCAAyC,gCAAgC;AACzE,mCAAmC,2BAA2B;AAC9D,qCAAqC,4BAA4B;AACjE,qCAAqC,6BAA6B;AAClE;AACA;AACA;;AAEO,6BAA6B,yDAAS;AAC7C;AACA;;AAEA,gBAAgB,aAAa;AAC7B,YAAY,aAAa;AACzB;AACA,kCAAkC,yBAAyB;AAC3D,mCAAmC,wBAAwB;AAC3D,oCAAoC,yBAAyB;AAC7D,uCAAuC,4BAA4B;AACnE,sCAAsC,2BAA2B;;AAEjE;;AAEA;;AAEO,qBAAqB,yDAAS;;;AAGrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB,YAAY,SAAS;AACrB;AACA;AACA;AACA,MAAM,mDAAc,GAAG,qCAAqC;AAC5D,wBAAwB,oBAAoB;AAC5C;;AAEA;AACA;;AAEA;AACA;;AAEA,6CAA6C,uDAAkB;AAC/D,MAAM,mDAAc,GAAG,qCAAqC;AAC5D,wBAAwB,oBAAoB;;AAE5C;;AAEA;AACA;;AAEA;AACA,oBAAoB,0CAAK,GAAG,uDAAkB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;;AAEA;;AAEO,qBAAqB,yDAAS;;;AAGrC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA,IAAI,mDAAc,GAAG,uCAAuC;AAC5D;AACA,sBAAsB,oBAAoB;AAC1C;;AAEA;AACA,oBAAoB,0CAAK,UAAU,qDAAgB;AACnD;AACA;AACA,wCAAwC,OAAO;AAC/C;AACA,4BAA4B,8BAA8B;AAC1D,6BAA6B,+BAA+B;AAC5D,6BAA6B,+BAA+B;AAC5D;AACA;AACA;AACA;;AAEA;;AAEO,sBAAsB,yDAAS;;AAEtC;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB,IAAI,mDAAc,IAAI,iCAAiC;AACvD;;AAEA;AACA,qBAAqB,0CAAK,GAAG,sDAAiB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,oCAAoC;AAClD;AACA;AACA,cAAc,oCAAoC;AAClD;AACA;AACA;AACA;;AAEA;;AAEO,yBAAyB,yDAAS;;AAEzC;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB,IAAI,mDAAc,GAAG,4DAA4D;AACjF;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEO,yBAAyB,yDAAS;;AAEzC;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGO,uBAAuB,yDAAS;;AAEvC;AACA;AACA;AACA;;AAEA,iBAAiB,QAAQ;AACzB,YAAY,SAAS;AACrB;AACA;AACA,MAAM,mDAAc,GAAG,gDAAgD;AACvE,wBAAwB,oBAAoB;AAC5C;AACA;AACA,cAAc,QAAQ;AACtB,6DAA6D,MAAM;AACnE,MAAM,yDAAoB;AAC1B,MAAM,sDAAiB;AACvB;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,0CAAK,EAAE,qDAAgB;AACzC;AACA;AACA;AACA,WAAW;AACX;AACA,2BAA2B,IAAI;AAC/B,sBAAsB,QAAQ,GAAG,QAAQ;AACzC,sCAAsC,WAAW;AACjD,uCAAuC,YAAY;AACnD,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEO,yBAAyB,yDAAS;;AAEzC;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGO,yBAAyB,yDAAS;;AAEzC,QAAQ;;AAER;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,YAAY,SAAS;AACrB,YAAY,OAAO,EAAE,0CAAK,GAAG,gDAAW;AACxC;AACA,MAAM,mDAAc,GAAG,yBAAyB;AAChD,wBAAwB,oBAAoB;AAC5C;AACA;AACA,MAAM,mDAAc,GAAG,wBAAwB;AAC/C,wBAAwB,oBAAoB;;AAE5C;AACA;;AAEA;AACA,YAAY,0BAA0B,EAAE,0CAAK,EAAE,gDAAW;AAC1D;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT,SAAS;AACT,SAAS;AACT,SAAS;AACT;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;ACnT6C;AACF;;AAEpC,6BAA6B,yDAAS;AAC7C;AACA;;AAEA,gBAAgB,aAAa;AAC7B,YAAY,aAAa;AACzB;AACA;AACA,kCAAkC,wBAAwB;AAC1D,oCAAoC,0BAA0B;AAC9D,wCAAwC,8BAA8B;;AAEtE;;AAEA;;;AAGO,qBAAqB,yDAAS;AACrC;;AAEA;AACA,yBAAyB,4DAAuB;AAChD,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC,mBAAmB,mBAAmB;AACtC,mBAAmB,oBAAoB;AACvC,mBAAmB,kBAAkB;AACrC;;AAEA;AACA;AACA;;AAEA;;AAEO,uBAAuB,yDAAS;;;AAGvC;AACA,yBAAyB,4DAAuB;AAChD,YAAY,OAAO;AACnB;AACA;AACA,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA;;AAEO,2BAA2B,yDAAS;AAC3C;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB,YAAY,SAAS;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;ACjGA;AACA;AACA,MAAM,YAAY,OAAO,aAAa,cAAc,MAAM,QAAQ,QAAQ,MAAM;;AAEhF,gBAAgB,aAAa;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,UAAU;AACrD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gBAAgB,UAAU;AAC1B,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,iEAAe;;;;;;;;;;;;;;ACzFf;AACA;AACA;AACA;AACA,sBAAsB,MAAM;AAC5B,sBAAsB,MAAM;AAC5B,0BAA0B,MAAM;AAChC,uBAAuB,MAAM;AAC7B;AACA,GAAG;AACH;;AAEO;;;;;;;;;;;;;;ACZP;AACA;AACA,UAAU,MAAM,YAAY,MAAM,KAAK;AACvC;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAe,MAAM;;;;;;;;;;;;;;ACvDrB;AACA,SAAS,KAAK;;AAEd;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,mBAAmB;AACnB;AACA,YAAY,0CAA0C;AACtD,gCAAgC,OAAO,QAAQ,KAAK,SAAS,MAAM,QAAQ,KAAK,QAAQ,KAAK,SAAS,MAAM;AAC5G;AACA,wBAAwB,oBAAoB;AAC5C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,iEAAe,KAAK;;;;;;UCvCpB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;UENA;UACA;UACA;UACA","sources":["webpack://reset/./csr.js","webpack://reset/./src/action.js","webpack://reset/./src/components/App.js","webpack://reset/./src/components/PostListPage.js","webpack://reset/./src/components/PostSingle.js","webpack://reset/./src/lib/Component.js","webpack://reset/./src/lib/Data.js","webpack://reset/./src/lib/Router.js","webpack://reset/./src/lib/Store.js","webpack://reset/webpack/bootstrap","webpack://reset/webpack/runtime/define property getters","webpack://reset/webpack/runtime/hasOwnProperty shorthand","webpack://reset/webpack/runtime/make namespace object","webpack://reset/webpack/before-startup","webpack://reset/webpack/startup","webpack://reset/webpack/after-startup"],"sourcesContent":["import { actionHandler } from './src/action.js'\nimport Store from './src/lib/Store.js';\nimport { totData } from './src/lib/Data.js';\nimport app from './src/components/App.js'\nimport Router from './src/lib/Router.js';\n\nconst initialState = {\n  data : totData.slice().reverse().slice(0,5),\n  page : 1,\n  size : 5, \n  order : 'dsc',\n  filter : '',\n  name : '',\n  total : totData.length,\n}\n\nconst state = globalThis.state || initialState; \nconst store = new Store();\nstore.initState(state);\nstore.subscribe(app);\n\nlet temp ;\nObject.entries(actionHandler.cacheHandler)\n  .forEach(([ handler, func ]) => {\n    temp = func\n    store.cacheHandler[handler] = temp.bind(store);\n})\n\n\nconst router = new Router();\nrouter.subscribe(app);\nrouter.setRoutes( \n  [\n    { path : '/',\n      comPosition : 0 \n    },\n    { path : '/post-single',\n      comPosition : 1\n    },\n  ] \n)\n\nrouter.setRoot(document.querySelector('#root') );\nstore.cacheHandler.setCache();\n\nconsole.log(store, router)\nexport { store, router }","export const actionHandler = {\n  state : \"\", \n  cacheHandler : {\n\n    setCache (){\n      // First hasCacheChecker \n      const { data, total } = this.state;\n      // console.log(data, total)\n      const { isValid, cachingData } = this.cacheHandler.hasCacheChecker();\n      let cached = JSON.parse(localStorage.getItem('cached'));\n    \n      // no cache => set cache by newState\n      if(!cached){\n        return localStorage.setItem('cached', JSON.stringify([\n          { id : this.cacheHandler.getCacheId(), data, total }\n        ]))\n      }\n      // cache exists but needs to have more with newState\n      if(!isValid){\n        // if cache over 100 => get rid of the first 20  \n        if( isValid && cached.length >= 100){ \n          cached = cached.filter((ele,idx) => idx >= 20)\n          localStorage.removeItem('cached')\n        }\n        // over 100 or not update cache with newone\n        cached.push({ id : this.cacheHandler.getCacheId(), data, total })\n        return localStorage.setItem('cached', JSON.stringify(cached)) \n      }\n    \n    },\n    \n    getCacheId(){\n      // console.log( this.state)\n      const { filter, name, order, page, size, total } = this.state;\n      const id = `filter=${filter}&name=${name}&order=${order}&page=${page}&size=${size}&total=${total}`\n      return id\n    },\n    \n    hasCacheChecker(){\n      // check cashdata with current state(updated)\n      const id = this.cacheHandler.getCacheId()\n      const cached = JSON.parse(localStorage.getItem('cached')) || [];\n      console.log(cached)\n      // filter with id and range\n      let filtered = cached.filter(ele => ele.id === id)\n      const bool = filtered.length > 0 \n      console.log(filtered, bool)\n      return { \n        isValid : bool, \n        cachingData : bool ? filtered : [],\n      }\n      \n    },\n    \n    async searchCache(){\n    \n      // cache invalid => requestApi or get data from it\n      const { isValid, cachingData } = this.cacheHandler.hasCacheChecker();\n      if( !isValid ){\n        // after api, maunally render as it returns  async result\n        const result = await this.cacheHandler.updateCacheByApi()\n        if(result ){\n          this.state = {...this.state, ...{ data : result.data},  ...{ total : result.total }}\n          this.renderAll()\n        }\n        else{\n          // need to change this for better UI text\n          alert(\"Error on cacheing update \")\n        } \n      } \n      else{ // cache is valid to use\n        console.log(\"no need to req api for cache but filtered from cache state =\", cachingData)\n        // state update by cache & server side store, too\n        this.state = {...this.state, ...{ data : cachingData[0].data , total : cachingData[0].total }}\n        this.cacheHandler.updateStateByApi() \n      }\n      return \n      \n    },\n        \n    async updateCacheByApi(){\n      console.log(\"request cache update\")\n      // cache invalid => request new state and cache \n\n      return await fetch(\n        `/api/cache?${this.cacheHandler.getCacheId()}`, \n        { method: 'get'}\n      )\n      .then(result => result.json())\n      .then(result => {\n        let cached = JSON.parse(localStorage.getItem('cached'))\n        if(!cached || cached.length === 0) cached = []   \n        \n        // console.log(result)\n        cached.push(result)\n        localStorage.setItem('cached', JSON.stringify(cached))\n        // window.location.href('http://localhost:8080/page?'+this.getCacheId())\n        \n        return result\n      })\n      .catch(err => {\n        console.log(err)\n        alert(\"일시적인 오류 입니다, 다시 시도해 주세요\")\n      })\n    },\n    \n    async updateStateByApi(){\n      console.log('변경된 state before updateStateByApi', this.state)\n      const result = await fetch(\n        '/api/state', { \n          method : 'put',\n          headers: { \"content-type\" : \"application/json\" },\n          body: JSON.stringify(this.state),\n      }).then(resp => {\n        console.log('resp from update state==', resp);\n        return resp\n      });\n      \n      return result.status === 400 \n        ? alert(\"잘못된 요청에 의한 일시적 장애가 발생 했습니다! 조금 다시 시도해 주세요\") :\n        result.status === 404 \n        ? alert(\"요청한 페이지를 찾을 수 없습니다.\") :\n        result.status === 500 \n        ? alert(\"시스템 장애가 발생했습니다. 조금 있다가 다시 시도해 주세요\") :\n        result.status === 203 \n        ? console.log(result)\n        // window.location.href('http://localhost:8080/page?'+this.getCacheId())\n        : null\n    }\n  \n  }\n}\n","import  Component  from \"../lib/Component.js\";\nimport { PostListPage } from \"./PostListPage.js\";\nimport { PostSinglePage } from \"./PostSingle.js\";\n\nclass App extends Component{\n\n  constructor({ name, state }){\n    super({ name, state })\n    this.components.push(new PostListPage({ name : 'postlistpage' , state}));\n    this.components.push(new PostSinglePage({ name :'postsingle', state }));\n  }\n\n  template(){\n    const renderHTML = this.components[this.curPos].template();\n    return `\n        ${renderHTML}\n    `;\n  }\n}\n\nexport default new App({ name : 'app'})","import Component from '../lib/Component.js';\nimport { store, router } from \"../../csr.js\";\n\nexport class PostListPage extends Component{\n  \n  constructor({ name, state }){\n    super({ name, state })\n    this.child = [] \n    this.child.push(new PostListHeader({ name : 'postlistheader', state }))\n    this.child.push(new Postlist({ name : 'postlist' , state }))\n    this.child.push(new Pagination({ name : 'pagination', state }))\n    this.child.push(new PostButton({ name : 'postbutton' , state }))\n  }\n  \n}\n\nexport class PostListHeader extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    this.child = []\n    this.child.push( new Search({ name : 'search' , state }) )\n    this.child.push( new Paging( { name :'paging', state  }) )\n    this.child.push( new Sorting( { name : 'sorting', state }) )\n    this.child.push( new SortButton( { name : 'sortbutton', state }) )\n    this.child.push( new RefreshAll({ name :'refreshall', state }) )\n\n  }\n\n}\n\nexport class Search extends Component{\n\n\n  setEvent(){\n    this.el.querySelector('button').removeEventListener(\"click\", this.firstBonder);\n    this.el.querySelector('button').addEventListener(\"click\", this.firstBonder);\n    \n    this.el.removeEventListener(\"keyup\", this.secondBonder);\n    this.el.addEventListener(\"keyup\", this.secondBonder);\n  }\n  \n  eventHandler({ target }){\n    const { action } = target.dataset ;\n    if( action === 'searchInput' ) return \n    if( action === 'searchBtn'){\n      const value = this.el.querySelector('input').value\n      store.setState({ filter : value, page : 1, name : '' });\n      // this.state = { ...this.state, ...{ filter: value, page : 1, name : \"\" }}\n    }\n\n    // store.setState(store.state)\n  }\n\n  secondHandler(e){\n    this.filter = e.target.value\n\n    if(e.code === 'Enter' && this.filter !== store.state.filter){\n      store.setState({ filter : (e.target.value), page : 1 })\n      // this.state = { ...this.state, ...{ filter : (e.target.value), page : 1 } }\n\n      // console.log(\"search button after state==\", store.state)\n\n    }\n  }\n\n  template(){\n    const keyword = store ? store.state.filter : this.state.filter\n    return `\n    <div data-component=\"search\" id=\"search\">\n      <input \n        data-action='searchInput' \n        placeholder=\"search\" \n        type=\"text\" \n        value=${keyword? keyword : \"\"}>\n      <button data-action='searchBtn'>검색</button>\n    </div>\n  `;\n  } \n\n}\n\nexport class Paging extends Component {\n\n\n  setEvent(){\n    \n    this.el.removeEventListener(\"change\", this.firstBonder)\n    this.el.addEventListener(\"change\", this.firstBonder)\n  }\n  \n  eventHandler({ target }){\n    // console.log(target)\n    store.setState({ size : Number(target.value), page : 1 })\n    // console.log(store)\n    // this.state = { ...this.state, ...{ size : Number(target.value), page : 1 } }\n  }\n\n  template(){\n    const select =  store ? Number(store.state.size) :  Number(this.state.size)\n    return `\n      <div data-component=paging id=\"paging\">\n        <label for=\"pagination\" value=${select}>페이지</label>\n          <select data-action =\"page\">\n          <option value=5 ${select === 5? \"selected\" : \"\"}>5</option>\n          <option value=10 ${select === 10? \"selected\" : \"\"}>10</option>\n          <option value=20 ${select === 20? \"selected\" : \"\"}>20</option>\n        </select>\n      </div>\n    `;\n  }\n\n}\n\nexport class Sorting extends Component{\n\n  setEvent(){\n    \n\n    this.el.removeEventListener(\"change\", this.firstBonder)\n    this.el.addEventListener(\"change\", this.firstBonder)\n  }\n  \n  eventHandler({ target }){\n    store.setState( { order : target.value, page : 1 } )\n  }\n\n  template(){\n    const selected = store ? store.state.order : this.state.order\n    return `\n    <div data-component='sorting' id=\"sorting\">\n      <label for=\"sorting\">날짜정렬</label>\n      <select data-action=\"order\">\n        <option \n            name='order' value=\"dsc\" \n            ${selected === 'dsc'? \"selected\" : \"\"}>최신</option>\n        <option \n            name='order' value=\"asc\"\n            ${selected === 'asc'? \"selected\" : \"\"}>예전</option>\n      </select>\n    </div>`\n    ;\n  }\n\n}\n\nexport class SortButton extends Component{\n\n  setEvent(){\n    \n\n    this.el.removeEventListener(\"click\", this.firstBonder)\n    this.el.addEventListener(\"click\", this.firstBonder)\n  }\n  \n  eventHandler({ target }){\n    store.setState({ filter : \"\", order : 'dsc', name : \"\",  page : 1, size : 5 })\n  }\n\n  template(){\n    return `\n      <button id=\"sortbutton\">초기화</button>\n    `;\n  }\n\n}\n\nexport class RefreshAll extends Component{\n\n  setEvent(){\n    \n\n    this.el.removeEventListener(\"click\", this.firstBonder)\n    this.el.addEventListener(\"click\", this.firstBonder)\n  }\n  \n  eventHandler({ target }){\n    window.location.reload()\n  }\n  \n  template(){\n    return `\n      <button id=\"refreshall\">새로고침</button>\n    `;\n  }\n\n}\n\n\nexport class Postlist extends Component{\n\n  setEvent(){\n    this.el.removeEventListener(\"click\", this.firstBonder)\n    this.el.addEventListener('click', this.firstBonder)\n  }\n\n  eventHandler({ target }){\n    const { action } = target.dataset\n    \n    if( action === 'writer' ){\n      store.setState({ name : target.innerText , filter : \"\", page : 1});\n      // this.state = { ...this.state, ...{ name : target.innerText , filter : \"\", page : 1} }\n    } \n    if( action === 'title' ){\n      const { index } = target.parentElement.dataset\n      const url = window.origin + \"/post-single\" + `?index=${index}`\n      router.setRouteState(index)\n      router.setPathCur('/post-single');\n      history.pushState(state , \"\", url)\n    }\n  }\n\n  template(){\n    \n    const items = store? store.state.data : this.state.data\n    // console.log('dataaaa===',this.state.data)\n    return `\n    <div id='postlist'>\n        ${ items.length === 0 ? \"\" : \n          items.map( (item, idx) => `\n          <ul data-index=${idx}>  \n            <li id= ${item.id}>${item.id}</li>\n            <li data-action='title'>${item.title}</li>\n            <li data-action='writer'>${item.writer}</li>\n            <li>${item.date}</li>\n          </ul>`)\n          .join(\"\")\n        }\n      </div>`\n  }\n\n  render(){\n    // console.log('what about yo')\n    this.el.innerHTML = this.template();\n    requestAnimationFrame(()=> this.setEvent())\n  }\n}\n\nexport class PostButton extends Component{\n\n  setEvent(){\n\n    this.el.removeEventListener(\"click\", this.eventHandler)\n    this.el.addEventListener(\"click\", this.eventHandler)\n  }\n  \n  eventHandler({target}){\n    \n    // const url = location.origin + '/post-edit';\n    // router.setPathCur('/post-edit');\n    \n    // history.pushState(store, \"글작성\", url)\n  }\n\n  template(){\n    return `\n      <div id=postbutton>\n        <button>작성</button>\n      </div>\n    `\n  }\n  \n}\n\n\nexport class Pagination extends Component{\n\n  page; group\n\n  setEvent(){\n\n    this.el.removeEventListener(\"click\", this.firstBonder)\n    this.el.addEventListener(\"click\", this.firstBonder)\n  }\n  \n  eventHandler({target}){\n    const { action } = target.dataset ;\n    const { page } = store ? store.state : this.state\n    if(action === 'more'){\n      store.setState({ page : Number(page) + 1 })\n      // this.state = { ...this.state, ...{ page : Number(page) + 1 } }\n    }\n    if(action === 'less'){\n      store.setState({ page : Number(page) -1 })\n      // this.state = { ...this.state, ...{ page : Number(page) - 1 } }\n\n    }\n  }\n\n  template(){\n    const { page, size, total, data } = store? store.state : this.state;\n    const less = Number(page) > 1;\n    const more = Number(size)*Number(page) < Number(total) ;\n    // console.log('postListPage============', this.state)\n\n    return `\n      <div id=pagination>\n      ${ Number(total) === 0 ? `<span class=\"none-display\">\"게시글이 존재 하지 않습니다.\"</span>` : \"\"}\n      ${ less ? `<button data-action=\"less\">이전</button>` : \"\" }\n      ${ more ? `<button data-action=\"more\">더보기</button>` : \"\" }\n      ${ Number(total) && !more ? `<span class=\"none-display\">\"마지막 페이지 입니다\"</span>` : \"\" }\n      </div>\n    `\n  }\n\n}\n","import { router, store } from \"../../csr.js\";\nimport Component from '../lib/Component.js'\n\nexport class PostSinglePage extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    // this.root = root;\n    this.child = [];\n    this.child.push( new Header({ name : 'header', state }))\n    this.child.push( new Contents({ name : 'contents', state }))\n    this.child.push( new BottomButton({ name : 'bottombutton', state }))\n\n  }\n\n}\n\n\nexport class Header extends Component{\n  \n\n  template(){\n    const index = Number(router.routeState.value)\n    const { data } = this.state \n    return `\n      <header id=\"header\">\n        <div>\n          <span>글번호</span>\n          <span>제목</span>\n          <span>작성자</span>\n          <span>날짜</span>\n        </div>\n        <div>\n          <span>${ data[index].id }</span>\n          <span>${ data[index].title }</span>\n          <span>${ data[index].writer }</span>\n          <span>${ data[index].date }</span>\n        </div>\n\n      </header>\n    `\n  }\n\n}\n\nexport class Contents extends Component{\n\n\n  template(){\n    const index = Number(router.routeState.value)\n    const { data } = this.state \n    return `\n      <div id=\"contents\">\n        <p>${data[index].content}</p>\n      </div>\n    `;  \n  }\n  \n}\n\nexport class BottomButton extends Component{\n  \n\n  setEvent(){\n    this.el.removeEventListener(\"click\", this.firstBonder)\n    this.el.addEventListener(\"click\", this.firstBonder)\n  }\n  \n  eventHandler({ target }){\n    const { action } = target.dataset; \n\n    if(action === \"edit\"){\n      // routing to edit-page\n      console.log(this.state)\n    }\n    if(action === \"list\"){\n      // routing to list-page\n      console.log(history.state)\n    }\n    if(action === \"delete\"){\n      // delete request \n    }\n  }\n\n\n  template(){\n    return `\n      <div id=\"bottombutton\">\n        <button data-action=\"edit\">수정</button>\n        <button data-action=\"list\">목록</button>\n        <button data-action=\"delete\">삭제</button>\n      </div>\n    `;\n  }\n\n}\n","class Component{\n  \n  el; components; child; firstBonder; secondBonder; name; curPos; oldPos; root; state\n\n  constructor({ name, state }){\n    this.components=[];\n    this.child =[];\n    this.name = name;\n    this.state = state;\n    this.curPos = 0;\n    this.oldPos = 0;    \n    \n    this.firstBonder = this.eventHandler.bind(this);\n    this.secondBonder = this.secondEventHandler.bind(this);\n  }\n  \n  setState(state){\n    this.state = state;\n    if(this.components.length > 0){\n      this.components[this.curPos].setState(state)\n    }\n    if(this.child.length > 0){\n      this.child.map(node => node.setState(state))\n    }\n  }\n  setRoot(root){\n    if(!this.root)  this.root = root;\n    this.el =  this.root.querySelector(`#${this.name}`);\n    \n    if(this.components.length > 0){\n      this.components[this.curPos].setRoot(root);\n    }\n\n    if(this.child.length > 0){\n      this.child.map(node => node.setRoot(root));\n    }\n    \n    this.setEvent();\n  }\n  \n  setEvent(){\n\n  }\n\n  eventHandler(){\n\n  }\n\n  secondEventHandler(){\n    \n  }\n\n  template(){\n    let renderHtml='';\n    if(this.components.length > 0){\n      renderHtml = this.components[this.curPos].template();\n      // console.log('this app name=', this.name, this.state, renderHtml)\n\n    } \n\n    if(this.child.length > 0){\n      renderHtml = this.child.map(node => node.template()).join('')\n      // console.log('this app name=', this.name, this.state, renderHtml)\n\n    }\n    // console.log('this app name=', this.name, this.state, renderHtml)\n\n    return `\n      <div id=${this.name}>\n        ${renderHtml}\n      </div>\n    `;\n\n  }\n  \n  render(){\n    const oldOne = this.el.innerHtml;\n    const newOne = this.template();\n    \n    // Needs\n    // some diff logic to compare two\n    // console.log(\"rendering here =\", this.name, this.el)\n    this.el.innerHTML= newOne //(should be oldOne);\n    requestAnimationFrame(()=> this.setRoot())\n\n  }\n\n}\n\nexport default Component","const  setData = (dataLength = 30) => {\n  return new Array(dataLength).fill(0).map((ele, idx) => {\n    return {\n      id : idx+1, \n      title : `title${idx+1}`,\n      writer : `name${idx+1}`,\n      content : `content${idx+1}`,\n      date : `2022-1-${idx+1}`\n    }\n  })\n}\n\nexport const totData = setData(200);","class Router {\n  \n  routes; base; routeState; root; app; cur;\n  \n  constructor(){\n\n    this.cur = 0;\n    this.routeState = { value : \"\" };\n    // this.setup();\n  }\n  \n  subscribe(app){\n    this.app = app;\n  }\n\n  setRoutes( routes ){\n    this.routes = routes\n  }\n\n  setRoot(root){\n    this.root = root \n\n    try{\n      this.app.setRoot(this.root)\n    }catch(err){\n      if(err instanceof TypeError){ \n        return this.serverRender()\n      }\n    }\n  }\n\n  setRouteState(newVal){\n    this.routeState = { value : newVal}\n  }\n  \n  setPathCur(newCur){\n    this.cur = this.routes.filter( \n      route => route.path === newCur )[0].comPosition;\n\n    this.app.curPos = this.cur;\n    this.templateRender();\n    this.setRoot();\n  }\n\n  templateRender(){\n    let html = this.app.template();\n    this.root.innerHTML = html;\n  }\n  \n  serverRender(){\n    // console.log('asdfasdfasdfdsa=========', this.app.state)\n    return this.app.template();\n  }\n}\n\nexport default Router;","class Store {\n  state; app; cacheHandler;\n\n  constructor(){\n    this.cacheHandler = {}; \n  }\n\n  subscribe(app){\n    this.app =app;\n  }\n\n  initState(initial){\n    this.state = initial;\n  }\n\n  setState(newState){\n    this.state = { ...this.state, ...newState };\n    this.updateView();\n    const { filter, name, order, page, size, total }  = this.state\n    const url = `/page?filter=${filter}&name=${name}&order=${order}&page=${page}&size=${size}&total=${total}`\n    console.log('after state change all == url to change==', url)\n    history.pushState({ state : this.state }, null, location.origin + url)    \n  }\n\n  updateView(){\n    if(Object.keys(this.cacheHandler).length !== 0) this.cacheHandler.searchCache();\n    this.renderAll()\n  }\n\n  renderAll(){\n    this.app.render();\n  }\n\n  hydrate(newState){\n    this.state = newState\n  }\n\n}\n\nexport default Store;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./csr.js\");\n",""],"names":[],"sourceRoot":""}