{"version":3,"file":"ssr.js","mappings":"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","sources":["webpack://SSR/webpack/bootstrap","webpack://SSR/webpack/runtime/define property getters","webpack://SSR/webpack/runtime/hasOwnProperty shorthand","webpack://SSR/webpack/runtime/make namespace object","webpack://SSR/./src/lib/Store.js","webpack://SSR/./src/lib/Component.js","webpack://SSR/./src/views/PostListPage.js","webpack://SSR/./src/views/PostSingle.js","webpack://SSR/./src/views/App.js","webpack://SSR/./ssr.js","webpack://SSR/./src/lib/Router.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","class Store {\n  state; app; cacheHandler;\n\n  constructor(){\n    this.cacheHandler = {}; \n  }\n\n  subscribe(app){\n    this.app =app;\n  }\n\n  initState(initial, server=false){\n    this.state = initial;\n    if(server) return \n    history.pushState({ state : this.state }, null, location.origin + '/page?' + this.cacheHandler.getCacheId())    \n\n  }\n\n  setState(newState){\n    this.state = { ...this.state, ...newState };\n    this.updateView();\n    // const { filter, name, order, page, size, total }  = this.state\n    // const url = `/page?filter=${filter}&name=${name}&order=${order}&page=${page}&size=${size}&total=${total}`\n    console.log('after setState=', this.state, location.origin + '/page?' + this.cacheHandler.getCacheId())\n    history.pushState({ state : this.state }, null, location.origin + '/page?' + this.cacheHandler.getCacheId())    \n  }\n\n  updateView(){\n    if(Object.keys(this.cacheHandler).length !== 0) this.cacheHandler.searchCache();\n    this.renderAll()\n  }\n\n  renderAll(){\n    this.app.render();\n  }\n\n  hydrate(newState){\n    this.state = newState\n  }\n\n}\n\nexport default Store;","class Component{\n  \n  el; components; child; firstBonder; secondBonder; name; curPos; oldPos; root; state\n\n  constructor({ name, state }){\n    this.components=[];\n    this.child =[];\n    this.name = name;\n    this.state = state;\n    this.curPos = 0;\n    this.oldPos = 0;    \n    \n    this.firstBonder = this.eventHandler.bind(this);\n    this.secondBonder = this.secondEventHandler.bind(this);\n  }\n  \n  setState(state){\n    this.state = state; // for serverside rendering\n    // console.log('=========================this.state, this.curPos',this.state, this.curPos)\n    if(this.components.length > 0){\n      this.components[this.curPos].setState(state)\n    }\n    if(this.child.length > 0){\n      this.child.map(node => node.setState(state))\n    }\n  }\n  setRoot(root){\n    if(!this.root)  this.root = root;\n    this.el =  this.root.querySelector(`#${this.name}`);\n    \n    if(this.components.length > 0){\n      this.components[this.curPos].setRoot(root);\n    }\n\n    if(this.child.length > 0){\n      this.child.map(node => node.setRoot(root));\n    }\n    \n    this.setEvent();\n  }\n  \n  setEvent(){\n\n  }\n\n  eventHandler(){\n\n  }\n\n  secondEventHandler(){\n    \n  }\n\n  template(){\n    let renderHtml='';\n    if(this.components.length > 0){\n      renderHtml = this.components[this.curPos].template();\n      // console.log('this app name=', this.name, this.state, renderHtml)\n\n    } \n\n    if(this.child.length > 0){\n      renderHtml = this.child.map(node => node.template()).join('')\n      // console.log('this app name=', this.name, this.state, renderHtml)\n\n    }\n    // console.log('this app name=', this.name, this.state, renderHtml)\n\n    return `\n      <div id=${this.name}>\n        ${renderHtml}\n      </div>\n    `;\n\n  }\n  \n  render(){\n    const oldOne = this.el.innerHtml;\n    const newOne = this.template();\n    \n    // Needs\n    // some diff logic to compare of two\n    // console.log(\"rendering here =\", this.name, this.el)\n    this.el.innerHTML= newOne //(should be oldOne after diff);\n    requestAnimationFrame(()=> this.setRoot())\n\n  }\n\n}\n\nexport default Component","import Component from '../lib/Component.js';\n\nexport class PostListPage extends Component{\n  \n  constructor({ name, state }){\n    super({ name, state })\n    this.child = [] \n    this.child.push(new PostListHeader({ name : 'postlistheader', state }))\n    this.child.push(new Postlist({ name : 'postlist' , state }))\n    this.child.push(new Pagination({ name : 'pagination', state }))\n    this.child.push(new PostButton({ name : 'postbutton' , state }))\n  }\n  \n}\n\nexport class PostListHeader extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    this.child = []\n    this.child.push( new Search({ name : 'search' , state }) )\n    this.child.push( new Paging( { name :'paging', state  }) )\n    this.child.push( new Sorting( { name : 'sorting', state }) )\n    this.child.push( new SortButton( { name : 'sortbutton', state }) )\n    this.child.push( new RefreshAll({ name :'refreshall', state }) )\n\n  }\n\n}\n\nexport class Search extends Component{\n\n\n   template(){\n    const keyword = this.state.filter\n    return `\n    <div data-component=\"search\" id=\"search\">\n      <input \n        data-action='searchInput' \n        placeholder=\"search\" \n        type=\"text\" \n        value=${keyword? keyword : \"\"}>\n      <button data-action='searchBtn'>검색</button>\n    </div>\n  `;\n  } \n\n}\n\nexport class Paging extends Component {\n\n\n  template(){\n    const select = Number(this.state.size)\n    return `\n      <div data-component=paging id=\"paging\">\n        <label for=\"pagination\" value=${select}>페이지</label>\n          <select data-action =\"page\">\n          <option value=5 ${select === 5? \"selected\" : \"\"}>5</option>\n          <option value=10 ${select === 10? \"selected\" : \"\"}>10</option>\n          <option value=20 ${select === 20? \"selected\" : \"\"}>20</option>\n        </select>\n      </div>\n    `;\n  }\n\n}\n\nexport class Sorting extends Component{\n\n\n  template(){\n    const selected = this.state.order\n    return `\n    <div data-component='sorting' id=\"sorting\">\n      <label for=\"sorting\">날짜정렬</label>\n      <select data-action=\"order\">\n        <option \n            name='order' value=\"dsc\" \n            ${selected === 'dsc'? \"selected\" : \"\"}>최신</option>\n        <option \n            name='order' value=\"asc\"\n            ${selected === 'asc'? \"selected\" : \"\"}>예전</option>\n      </select>\n    </div>`\n    ;\n  }\n\n}\n\nexport class SortButton extends Component{\n\n  template(){\n    return `\n      <button id=\"sortbutton\">초기화</button>\n    `;\n  }\n\n}\n\nexport class RefreshAll extends Component{\n\n  template(){\n    return `\n      <button id=\"refreshall\">새로고침</button>\n    `;\n  }\n\n}\n\n\nexport class Postlist extends Component{\n\n\n  template(){\n    \n    const items = this.state.data\n    // console.log('dataaaa===',this.state.data)\n    return `\n    <div id='postlist'>\n        ${ items.length === 0 ? \"\" : \n          items.map( (item, idx) => `\n          <ul data-index=${idx}>  \n            <li id= ${item.id}>${item.id}</li>\n            <li data-action='title'>${item.title}</li>\n            <li data-action='writer'>${item.writer}</li>\n            <li>${item.date}</li>\n          </ul>`)\n          .join(\"\")\n        }\n      </div>`\n  }\n}\n\nexport class PostButton extends Component{\n\n  template(){\n    return `\n      <div id=postbutton>\n        <button>작성</button>\n      </div>\n    `\n  }\n  \n}\n\n\nexport class Pagination extends Component{\n\n  page; group\n\n  template(){\n    const { page, size, total, data } =  this.state;\n    const less = Number(page) > 1;\n    const more = Number(size)*Number(page) < Number(total) ;\n    // console.log('postListPage============', this.state)\n\n    return `\n      <div id=pagination>\n      ${ Number(total) === 0 ? `<span class=\"none-display\">\"게시글이 존재 하지 않습니다.\"</span>` : \"\"}\n      ${ less ? `<button data-action=\"less\">이전</button>` : \"\" }\n      ${ more ? `<button data-action=\"more\">더보기</button>` : \"\" }\n      ${ Number(total) && !more ? `<span class=\"none-display\">\"마지막 페이지 입니다\"</span>` : \"\" }\n      </div>\n    `\n  }\n\n}\n","import Component from '../lib/Component.js'\n\nexport class PostSinglePage extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    // this.root = root;\n    this.child = [];\n    this.child.push( new Header({ name : 'header', state }))\n    this.child.push( new Contents({ name : 'contents', state }))\n    this.child.push( new BottomButton({ name : 'bottombutton', state }))\n\n  }\n\n}\n\n\nexport class Header extends Component{\n  \n\n  template(){\n    const index = this.index || 0\n    console.log('===============adfasdf',this.name, this.state)\n    const { data } = this.state \n    return `\n      <header id=\"header\">\n        <div>\n          <span>글번호</span>\n          <span>제목</span>\n          <span>작성자</span>\n          <span>날짜</span>\n        </div>\n        <div>\n          <span>${ data[index].id }</span>\n          <span>${ data[index].title }</span>\n          <span>${ data[index].writer }</span>\n          <span>${ data[index].date }</span>\n        </div>\n\n      </header>\n    `\n  }\n\n}\n\nexport class Contents extends Component{\n\n\n  template(){\n    const index = this.index || 0\n    const { data } = this.state \n    return `\n      <div id=\"contents\">\n        <p>${data[index].content}</p>\n      </div>\n    `;  \n  }\n  \n}\n\nexport class BottomButton extends Component{\n  \n\n\n  template(){\n    return `\n      <div id=\"bottombutton\">\n        <button data-action=\"edit\">수정</button>\n        <button data-action=\"list\">목록</button>\n        <button data-action=\"delete\">삭제</button>\n      </div>\n    `;\n  }\n\n}\n","import  Component  from \"../lib/Component.js\";\nimport { PostListPage } from \"./PostListPage.js\";\nimport { PostSinglePage } from \"./PostSingle.js\";\n\nclass App extends Component{\n\n  constructor({ name, state }){\n    super({ name, state })\n    this.components.push(new PostListPage({ name : 'postlistpage' , state}));\n    this.components.push(new PostSinglePage({ name :'postsingle', state }));\n  }\n\n}\n\nexport default new App({ name : 'app'})","import Store from './src/lib/Store.js';\nimport app from './src/views/App.js'\nimport Router from './src/lib/Router.js';\n\nexport function ssr_converter (context) {\n  return new Promise(async (resolve, reject) => {\n\n    const { url, state } = context;\n    \n    const store = new Store();\n    const router = new Router();\n\n    router.subscribe(app);\n    router.setRoutes( \n      [\n        { path : '/',\n          comPosition : 0 \n        },\n        { path : '/post-single',\n          comPosition : 1\n        },\n        { path : '/post-edit',\n          comPosition : 2\n        },\n      ] \n    )\n\n    router.setPathCur(url);\n    store.initState(state, true);\n    app.setState(state);\n\n    const ssr_html= router.serverRender();\n   \n    if(ssr_html) resolve( ssr_html ); \n    else reject( new Error('SSR error') )\n  })\n\n}\n","class Router {\n  \n  routes; base; routeState; root; app; cur; eventBounder;\n  \n  constructor(){\n\n    this.cur = 0;\n    this.routeState = { value : \"\" };\n\n  }\n  \n  subscribe(app){\n    this.app = app;\n  }\n\n  setRoutes( routes ){\n    this.routes = routes\n  }\n\n  setRoot(root){\n    if(!this.root && !root) this.root = document.querySelector('#root')\n    if(!this.root) this.root = root \n    // console.log(this.root)\n    try{\n      this.app.setRoot(this.root);\n      this.app.onLoad()\n\n    }catch(err){\n      if(err instanceof TypeError){ \n        return this.serverRender()\n      }\n    }\n  }\n\n\n  setRouteState(newVal){\n    this.routeState = { value : newVal}\n  }\n  \n  setPathCur(newCur){\n    // console.log('newCur========', newCur)\n    newCur = newCur === '/page' ? '/' : newCur\n    this.cur = this.routes.filter( \n      route => route.path === newCur )[0].comPosition;\n\n    this.app.curPos = this.cur;\n    if(this.root){\n      this.app.onLoad();\n      this.templateRender();\n      this.setRoot();\n    }\n    else{\n      return false\n      \n    }\n  }\n\n  templateRender(){\n    let html = this.app.template();\n    this.root.innerHTML = html;\n  }\n  \n  serverRender(){\n    // console.log('asdfasdfasdfdsa=========', this.app.state)\n    return this.app.template();\n  }\n}\n\nexport default Router;"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","el","components","child","firstBonder","secondBonder","name","curPos","oldPos","root","state","constructor","this","eventHandler","bind","secondEventHandler","setState","length","map","node","setRoot","querySelector","setEvent","template","renderHtml","join","render","innerHtml","newOne","innerHTML","requestAnimationFrame","PostListPage","super","push","PostListHeader","Postlist","Pagination","PostButton","Search","Paging","Sorting","SortButton","RefreshAll","filter","select","Number","size","selected","order","items","data","item","idx","id","title","writer","date","page","group","total","less","more","PostSinglePage","Header","Contents","BottomButton","index","console","log","content","ssr_converter","context","Promise","async","resolve","reject","url","store","app","cacheHandler","subscribe","initState","initial","server","history","pushState","location","origin","getCacheId","newState","updateView","keys","searchCache","renderAll","hydrate","router","routes","base","routeState","cur","eventBounder","setRoutes","document","onLoad","err","TypeError","serverRender","setRouteState","newVal","setPathCur","newCur","route","path","comPosition","templateRender","html","ssr_html","Error"],"sourceRoot":""}