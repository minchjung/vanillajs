(()=>{"use strict";var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{ssr_converter:()=>w});const n=class{el;components;child;firstBonder;secondBonder;name;curPos;oldPos;root;state;constructor({name:t,state:e}){this.components=[],this.child=[],this.name=t,this.state=e,this.curPos=0,this.oldPos=0,this.firstBonder=this.eventHandler.bind(this),this.secondBonder=this.secondEventHandler.bind(this)}setState(t){this.state=t,this.components.length>0&&this.components[this.curPos].setState(t),this.child.length>0&&this.child.map((e=>e.setState(t)))}setRoot(t){this.root||(this.root=t),this.el=this.root.querySelector(`#${this.name}`),this.components.length>0&&this.components[this.curPos].setRoot(t),this.child.length>0&&this.child.map((e=>e.setRoot(t))),this.setEvent()}setEvent(){}eventHandler(){}secondEventHandler(){}template(){let t="";return this.components.length>0&&(t=this.components[this.curPos].template()),this.child.length>0&&(t=this.child.map((t=>t.template())).join("")),`\n      <div id=${this.name}>\n        ${t}\n      </div>\n    `}render(){this.el.innerHTML=this.template(),requestAnimationFrame((()=>this.setRoot()))}};class s extends n{constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new a({name:"postlistheader",state:e})),this.child.push(new l({name:"postlist",state:e})),this.child.push(new h({name:"pagebutton",state:e}))}}class a extends n{child;constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new i({name:"search",state:e})),this.child.push(new o({name:"paging",state:e})),this.child.push(new r({name:"sorting",state:e})),this.child.push(new d({name:"sortbutton",state:e}))}}class i extends n{template(){return`\n    <div data-component="search" id="search">\n      <input \n        data-action='searchInput' \n        placeholder="search" \n        type="text" \n        value=${this.state.filter||""}>\n      <button data-action='searchBtn'>검색</button>\n    </div>\n  `}}class o extends n{template(){const t=Number(this.state.size);return`\n      <div data-component=paging id="paging">\n        <label for="pagination" value=${t}>페이지</label>\n          <select data-action ="page">\n          <option value=5 ${5===t?"selected":""}>5</option>\n          <option value=10 ${10===t?"selected":""}>10</option>\n          <option value=20 ${20===t?"selected":""}>20</option>\n        </select>\n      </div>\n    `}}class r extends n{template(){const t=this.state.order;return`\n    <div data-component='sorting' id="sorting">\n      <label for="sorting">날짜정렬</label>\n      <select data-action="order">\n        <option \n            name='order' value="dsc" \n            ${"dsc"===t?"selected":""}>최신</option>\n        <option \n            name='order' value="asc"\n            ${"asc"===t?"selected":""}>예전</option>\n      </select>\n    </div>`}}class d extends n{template(){return'\n      <div id="sortbutton">\n        <button data-action = \'all\' id="refreshall">초기화</button>\n        <button data-action = \'page\' id="refreshpage">새로고침</button>\n      </div>\n    '}}class l extends n{template(){const t=this.state.data,e=""!==this.state.name?"class='writer-on'":"";return`\n    \n      <div id='postlist'>\n        <ul>\n          <li>글번호</li>\n          <li data-action='title'>제목</li>\n          <li>작성자</li>\n          <li>작성일</li>\n        </ul>\n        ${0===t.length?"":t.map(((t,n)=>`\n          <ul data-index=${t.id}>  \n            <li id= ${t.id}>${t.id}</li>\n            <li data-action='title'>${t.title}</li>\n            <li data-action='writer' ${e} >${t.writer}</li>\n            <li>${t.date.split("T")[0]}</li>\n          </ul>`)).join("")}\n      </div>`}}class h extends n{constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new p({name:"pagination-button",state:e})),this.child.push(new c({name:"postbutton",state:e}))}}class c extends n{template(){return"\n      <div id=postbutton>\n        <button>글 작성</button>\n      </div>\n    "}}class p extends n{page;group;template(){const{page:t,size:e,total:n,data:s}=this.state,a=Number(t)>1,i=Number(e)*Number(t)<Number(n);return`\n      <div id=pagination-button>\n      ${0===Number(n)?'<span class="none-display">"게시글이 존재 하지 않습니다."</span>':""}\n      ${a?'<button data-action="less">이전</button>':""}\n      ${i?'<button data-action="more">더보기</button>':""}\n      ${Number(n)&&!i?'<span class="none-display">"마지막 페이지 입니다"</span>':""}\n      </div>\n    `}}const u={index:0,setIndex(t){this.index=t}};class m extends n{child;constructor({name:t,state:e}){super({name:t,state:e}),this.child=[],this.child.push(new b({name:"header",state:e})),this.child.push(new v({name:"contents",state:e})),this.child.push(new g({name:"bottombutton",state:e}))}}class b extends n{template(){const t=u.index,e=this.state.data.filter((e=>e.id===Number(t)))[0];return!(!e||0===e.length)&&`\n      <header id="header">\n        <div class='single-header'>\n          <span>글번호</span>\n          <span>제목</span>\n          <span>작성자</span>\n          <span>날짜</span>\n        </div>\n        <div class='single-content'>\n          <span>${e.id}</span>\n          <span>${e.title}</span>\n          <span>${e.writer}</span>\n          <span>${e.date.split("T")[0]}</span>\n        </div>\n\n      </header>\n    `}}class v extends n{template(){const t=u.index;return`\n      <div id="contents">\n        <textarea cols="50" rows="20" name ='content' readonly>${this.state.data.filter((e=>e.id===Number(t)))[0].content}</textarea>\n      </div>\n    `}}class g extends n{template(){return'\n      <div id="bottombutton">\n      <button data-action="list">목록</button>\n        <button data-action="edit">수정</button>\n        <button data-action="delete">삭제</button>\n      </div>\n    '}}const x=new class extends n{constructor({name:t,state:e}){super({name:t,state:e}),this.components.push(new s({name:"postlistpage",state:e})),this.components.push(new m({name:"postsingle",state:e}))}}({name:"app"});function w(t){return new Promise((async(e,n)=>{let{url:s,state:a,index:i}=t;const o=new class{state;app;cacheHandler;constructor(){this.cacheHandler={}}subscribe(t){this.app=t}initState(t,e=!1){this.state=t}setState(t){this.state={...this.state,...t},history.pushState({state:this.state},null,location.origin+"/page?"+this.cacheHandler.getCacheId()),this.updateView()}updateView(){0!==Object.keys(this.cacheHandler).length&&this.cacheHandler.searchCache(),this.renderAll()}renderAll(){this.app.render()}hydrate(t){this.state=t}},r=new class{routes;base;index;root;app;cur;eventBounder;constructor(){this.cur=0,this.routeState={value:""}}subscribe(t){this.app=t}setRoutes(t){this.routes=t}setRoot(t){this.root||t||(this.root=document.querySelector("#root")),this.root||(this.root=t);try{this.app.setRoot(this.root),this.app.onLoad()}catch(t){if(t instanceof TypeError)return this.serverRender()}}setIndex(t){this.index=Number(t)}setPathCur(t,e=!1){t="/page"===t?"/":t,this.cur=this.routes.filter((e=>e.path===t))[0].comPosition,this.app.curPos=this.cur,e||this.templateRender()}templateRender(){this.root.innerHTML=this.app.template(),this.setRoot(this.root)}serverRender(){return this.app.template()}};r.subscribe(x),r.setRoutes([{path:"/",comPosition:0},{path:"/post-single",comPosition:1},{path:"/post-edit",comPosition:2},{path:"/nout-found",comPosition:3}]),s=0===a.data.length?"/not-found":s,r.setPathCur(s,!0),u.setIndex(Number(i)),o.initState(a,!0),x.setState(a);let d=r.serverRender();d?e(d):(r.setPathCur("/not-found",!0),d=r.serverRender(),d?e(d):n(new Error("SSR error")))}))}module.exports.SSR=e})();
//# sourceMappingURL=ssr.js.map