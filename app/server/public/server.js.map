{"version":3,"file":"server.js","mappings":"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","sources":["webpack://server/SSR/webpack/bootstrap","webpack://server/SSR/webpack/runtime/define property getters","webpack://server/SSR/webpack/runtime/hasOwnProperty shorthand","webpack://server/SSR/webpack/runtime/make namespace object","webpack://server/SSR/./src/lib/Store.js","webpack://server/SSR/./src/lib/Component.js","webpack://server/SSR/./src/views/PostListPage.js","webpack://server/SSR/./src/views/PostSingle.js","webpack://server/SSR/./src/views/App.js","webpack://server/SSR/./ssr.js","webpack://server/SSR/./src/lib/Router.js","webpack://server/./src/Data.js","webpack://server/./src/executor.js","webpack://server/./src/ssr.service.js","webpack://server/./src/store.js","webpack://server/./node_modules/console-browserify/index.js","webpack://server/external commonjs \"assert\"","webpack://server/external commonjs \"core-js/modules/es.array.concat.js\"","webpack://server/external commonjs \"core-js/modules/es.array.fill.js\"","webpack://server/external commonjs \"core-js/modules/es.array.filter.js\"","webpack://server/external commonjs \"core-js/modules/es.array.for-each.js\"","webpack://server/external commonjs \"core-js/modules/es.array.from.js\"","webpack://server/external commonjs \"core-js/modules/es.array.includes.js\"","webpack://server/external commonjs \"core-js/modules/es.array.is-array.js\"","webpack://server/external commonjs \"core-js/modules/es.array.iterator.js\"","webpack://server/external commonjs \"core-js/modules/es.array.join.js\"","webpack://server/external commonjs \"core-js/modules/es.array.map.js\"","webpack://server/external commonjs \"core-js/modules/es.array.reverse.js\"","webpack://server/external commonjs \"core-js/modules/es.array.slice.js\"","webpack://server/external commonjs \"core-js/modules/es.function.bind.js\"","webpack://server/external commonjs \"core-js/modules/es.function.name.js\"","webpack://server/external commonjs \"core-js/modules/es.json.to-string-tag.js\"","webpack://server/external commonjs \"core-js/modules/es.math.to-string-tag.js\"","webpack://server/external commonjs \"core-js/modules/es.number.constructor.js\"","webpack://server/external commonjs \"core-js/modules/es.object.create.js\"","webpack://server/external commonjs \"core-js/modules/es.object.define-properties.js\"","webpack://server/external commonjs \"core-js/modules/es.object.define-property.js\"","webpack://server/external commonjs \"core-js/modules/es.object.entries.js\"","webpack://server/external commonjs \"core-js/modules/es.object.get-own-property-descriptor.js\"","webpack://server/external commonjs \"core-js/modules/es.object.get-own-property-descriptors.js\"","webpack://server/external commonjs \"core-js/modules/es.object.get-prototype-of.js\"","webpack://server/external commonjs \"core-js/modules/es.object.keys.js\"","webpack://server/external commonjs \"core-js/modules/es.object.set-prototype-of.js\"","webpack://server/external commonjs \"core-js/modules/es.object.to-string.js\"","webpack://server/external commonjs \"core-js/modules/es.promise.js\"","webpack://server/external commonjs \"core-js/modules/es.reflect.construct.js\"","webpack://server/external commonjs \"core-js/modules/es.regexp.exec.js\"","webpack://server/external commonjs \"core-js/modules/es.string.includes.js\"","webpack://server/external commonjs \"core-js/modules/es.string.iterator.js\"","webpack://server/external commonjs \"core-js/modules/es.symbol.description.js\"","webpack://server/external commonjs \"core-js/modules/es.symbol.iterator.js\"","webpack://server/external commonjs \"core-js/modules/es.symbol.js\"","webpack://server/external commonjs \"core-js/modules/es.symbol.to-string-tag.js\"","webpack://server/external commonjs \"core-js/modules/web.dom-collections.for-each.js\"","webpack://server/external commonjs \"core-js/modules/web.dom-collections.iterator.js\"","webpack://server/external commonjs \"cors\"","webpack://server/external commonjs \"express\"","webpack://server/external commonjs \"global-jsdom/register\"","webpack://server/external commonjs \"regenerator-runtime/runtime.js\"","webpack://server/external commonjs \"util\"","webpack://server/external node-commonjs \"fs\"","webpack://server/external node-commonjs \"path\"","webpack://server/webpack/bootstrap","webpack://server/./server.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","class Store {\n  state; app; cacheHandler;\n\n  constructor(){\n    this.cacheHandler = {}; \n  }\n\n  subscribe(app){\n    this.app =app;\n  }\n\n  initState(initial, server=false){\n    this.state = initial;\n    if(server) return \n    history.pushState({ state : this.state }, null, location.origin + '/page?' + this.cacheHandler.getCacheId())    \n\n  }\n\n  setState(newState){\n    this.state = { ...this.state, ...newState };\n    this.updateView();\n    // const { filter, name, order, page, size, total }  = this.state\n    // const url = `/page?filter=${filter}&name=${name}&order=${order}&page=${page}&size=${size}&total=${total}`\n    console.log('after setState=', this.state, location.origin + '/page?' + this.cacheHandler.getCacheId())\n    history.pushState({ state : this.state }, null, location.origin + '/page?' + this.cacheHandler.getCacheId())    \n  }\n\n  updateView(){\n    if(Object.keys(this.cacheHandler).length !== 0) this.cacheHandler.searchCache();\n    this.renderAll()\n  }\n\n  renderAll(){\n    this.app.render();\n  }\n\n  hydrate(newState){\n    this.state = newState\n  }\n\n}\n\nexport default Store;","class Component{\n  \n  el; components; child; firstBonder; secondBonder; name; curPos; oldPos; root; state\n\n  constructor({ name, state }){\n    this.components=[];\n    this.child =[];\n    this.name = name;\n    this.state = state;\n    this.curPos = 0;\n    this.oldPos = 0;    \n    \n    this.firstBonder = this.eventHandler.bind(this);\n    this.secondBonder = this.secondEventHandler.bind(this);\n  }\n  \n  setState(state){\n    this.state = state; // for serverside rendering\n    // console.log('=========================this.state, this.curPos',this.state, this.curPos)\n    if(this.components.length > 0){\n      this.components[this.curPos].setState(state)\n    }\n    if(this.child.length > 0){\n      this.child.map(node => node.setState(state))\n    }\n  }\n  setRoot(root){\n    if(!this.root)  this.root = root;\n    this.el =  this.root.querySelector(`#${this.name}`);\n    \n    if(this.components.length > 0){\n      this.components[this.curPos].setRoot(root);\n    }\n\n    if(this.child.length > 0){\n      this.child.map(node => node.setRoot(root));\n    }\n    \n    this.setEvent();\n  }\n  \n  setEvent(){\n\n  }\n\n  eventHandler(){\n\n  }\n\n  secondEventHandler(){\n    \n  }\n\n  template(){\n    let renderHtml='';\n    if(this.components.length > 0){\n      renderHtml = this.components[this.curPos].template();\n      // console.log('this app name=', this.name, this.state, renderHtml)\n\n    } \n\n    if(this.child.length > 0){\n      renderHtml = this.child.map(node => node.template()).join('')\n      // console.log('this app name=', this.name, this.state, renderHtml)\n\n    }\n    // console.log('this app name=', this.name, this.state, renderHtml)\n\n    return `\n      <div id=${this.name}>\n        ${renderHtml}\n      </div>\n    `;\n\n  }\n  \n  render(){\n    const oldOne = this.el.innerHtml;\n    const newOne = this.template();\n    \n    // Needs\n    // some diff logic to compare of two\n    // console.log(\"rendering here =\", this.name, this.el)\n    this.el.innerHTML= newOne //(should be oldOne after diff);\n    requestAnimationFrame(()=> this.setRoot())\n\n  }\n\n}\n\nexport default Component","import Component from '../lib/Component.js';\n\nexport class PostListPage extends Component{\n  \n  constructor({ name, state }){\n    super({ name, state })\n    this.child = [] \n    this.child.push(new PostListHeader({ name : 'postlistheader', state }))\n    this.child.push(new Postlist({ name : 'postlist' , state }))\n    this.child.push(new Pagination({ name : 'pagination', state }))\n    this.child.push(new PostButton({ name : 'postbutton' , state }))\n  }\n  \n}\n\nexport class PostListHeader extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    this.child = []\n    this.child.push( new Search({ name : 'search' , state }) )\n    this.child.push( new Paging( { name :'paging', state  }) )\n    this.child.push( new Sorting( { name : 'sorting', state }) )\n    this.child.push( new SortButton( { name : 'sortbutton', state }) )\n    this.child.push( new RefreshAll({ name :'refreshall', state }) )\n\n  }\n\n}\n\nexport class Search extends Component{\n\n\n   template(){\n    const keyword = this.state.filter\n    return `\n    <div data-component=\"search\" id=\"search\">\n      <input \n        data-action='searchInput' \n        placeholder=\"search\" \n        type=\"text\" \n        value=${keyword? keyword : \"\"}>\n      <button data-action='searchBtn'>검색</button>\n    </div>\n  `;\n  } \n\n}\n\nexport class Paging extends Component {\n\n\n  template(){\n    const select = Number(this.state.size)\n    return `\n      <div data-component=paging id=\"paging\">\n        <label for=\"pagination\" value=${select}>페이지</label>\n          <select data-action =\"page\">\n          <option value=5 ${select === 5? \"selected\" : \"\"}>5</option>\n          <option value=10 ${select === 10? \"selected\" : \"\"}>10</option>\n          <option value=20 ${select === 20? \"selected\" : \"\"}>20</option>\n        </select>\n      </div>\n    `;\n  }\n\n}\n\nexport class Sorting extends Component{\n\n\n  template(){\n    const selected = this.state.order\n    return `\n    <div data-component='sorting' id=\"sorting\">\n      <label for=\"sorting\">날짜정렬</label>\n      <select data-action=\"order\">\n        <option \n            name='order' value=\"dsc\" \n            ${selected === 'dsc'? \"selected\" : \"\"}>최신</option>\n        <option \n            name='order' value=\"asc\"\n            ${selected === 'asc'? \"selected\" : \"\"}>예전</option>\n      </select>\n    </div>`\n    ;\n  }\n\n}\n\nexport class SortButton extends Component{\n\n  template(){\n    return `\n      <button id=\"sortbutton\">초기화</button>\n    `;\n  }\n\n}\n\nexport class RefreshAll extends Component{\n\n  template(){\n    return `\n      <button id=\"refreshall\">새로고침</button>\n    `;\n  }\n\n}\n\n\nexport class Postlist extends Component{\n\n\n  template(){\n    \n    const items = this.state.data\n    // console.log('dataaaa===',this.state.data)\n    return `\n    <div id='postlist'>\n        ${ items.length === 0 ? \"\" : \n          items.map( (item, idx) => `\n          <ul data-index=${idx}>  \n            <li id= ${item.id}>${item.id}</li>\n            <li data-action='title'>${item.title}</li>\n            <li data-action='writer'>${item.writer}</li>\n            <li>${item.date}</li>\n          </ul>`)\n          .join(\"\")\n        }\n      </div>`\n  }\n}\n\nexport class PostButton extends Component{\n\n  template(){\n    return `\n      <div id=postbutton>\n        <button>작성</button>\n      </div>\n    `\n  }\n  \n}\n\n\nexport class Pagination extends Component{\n\n  page; group\n\n  template(){\n    const { page, size, total, data } =  this.state;\n    const less = Number(page) > 1;\n    const more = Number(size)*Number(page) < Number(total) ;\n    // console.log('postListPage============', this.state)\n\n    return `\n      <div id=pagination>\n      ${ Number(total) === 0 ? `<span class=\"none-display\">\"게시글이 존재 하지 않습니다.\"</span>` : \"\"}\n      ${ less ? `<button data-action=\"less\">이전</button>` : \"\" }\n      ${ more ? `<button data-action=\"more\">더보기</button>` : \"\" }\n      ${ Number(total) && !more ? `<span class=\"none-display\">\"마지막 페이지 입니다\"</span>` : \"\" }\n      </div>\n    `\n  }\n\n}\n","import Component from '../lib/Component.js'\n\nexport class PostSinglePage extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    // this.root = root;\n    this.child = [];\n    this.child.push( new Header({ name : 'header', state }))\n    this.child.push( new Contents({ name : 'contents', state }))\n    this.child.push( new BottomButton({ name : 'bottombutton', state }))\n\n  }\n\n}\n\n\nexport class Header extends Component{\n  \n\n  template(){\n    const index = this.index || 0\n    console.log('===============adfasdf',this.name, this.state)\n    const { data } = this.state \n    return `\n      <header id=\"header\">\n        <div>\n          <span>글번호</span>\n          <span>제목</span>\n          <span>작성자</span>\n          <span>날짜</span>\n        </div>\n        <div>\n          <span>${ data[index].id }</span>\n          <span>${ data[index].title }</span>\n          <span>${ data[index].writer }</span>\n          <span>${ data[index].date }</span>\n        </div>\n\n      </header>\n    `\n  }\n\n}\n\nexport class Contents extends Component{\n\n\n  template(){\n    const index = this.index || 0\n    const { data } = this.state \n    return `\n      <div id=\"contents\">\n        <p>${data[index].content}</p>\n      </div>\n    `;  \n  }\n  \n}\n\nexport class BottomButton extends Component{\n  \n\n\n  template(){\n    return `\n      <div id=\"bottombutton\">\n        <button data-action=\"edit\">수정</button>\n        <button data-action=\"list\">목록</button>\n        <button data-action=\"delete\">삭제</button>\n      </div>\n    `;\n  }\n\n}\n","import  Component  from \"../lib/Component.js\";\nimport { PostListPage } from \"./PostListPage.js\";\nimport { PostSinglePage } from \"./PostSingle.js\";\n\nclass App extends Component{\n\n  constructor({ name, state }){\n    super({ name, state })\n    this.components.push(new PostListPage({ name : 'postlistpage' , state}));\n    this.components.push(new PostSinglePage({ name :'postsingle', state }));\n  }\n\n}\n\nexport default new App({ name : 'app'})","import Store from './src/lib/Store.js';\nimport app from './src/views/App.js'\nimport Router from './src/lib/Router.js';\n\nexport function ssr_converter (context) {\n  return new Promise(async (resolve, reject) => {\n\n    const { url, state } = context;\n    \n    const store = new Store();\n    const router = new Router();\n\n    router.subscribe(app);\n    router.setRoutes( \n      [\n        { path : '/',\n          comPosition : 0 \n        },\n        { path : '/post-single',\n          comPosition : 1\n        },\n        { path : '/post-edit',\n          comPosition : 2\n        },\n      ] \n    )\n\n    router.setPathCur(url);\n    store.initState(state, true);\n    app.setState(state);\n\n    const ssr_html= router.serverRender();\n   \n    if(ssr_html) resolve( ssr_html ); \n    else reject( new Error('SSR error') )\n  })\n\n}\n","class Router {\n  \n  routes; base; routeState; root; app; cur; eventBounder;\n  \n  constructor(){\n\n    this.cur = 0;\n    this.routeState = { value : \"\" };\n\n  }\n  \n  subscribe(app){\n    this.app = app;\n  }\n\n  setRoutes( routes ){\n    this.routes = routes\n  }\n\n  setRoot(root){\n    if(!this.root && !root) this.root = document.querySelector('#root')\n    if(!this.root) this.root = root \n    // console.log(this.root)\n    try{\n      this.app.setRoot(this.root);\n      this.app.onLoad()\n\n    }catch(err){\n      if(err instanceof TypeError){ \n        return this.serverRender()\n      }\n    }\n  }\n\n\n  setRouteState(newVal){\n    this.routeState = { value : newVal}\n  }\n  \n  setPathCur(newCur){\n    // console.log('newCur========', newCur)\n    newCur = newCur === '/page' ? '/' : newCur\n    this.cur = this.routes.filter( \n      route => route.path === newCur )[0].comPosition;\n\n    this.app.curPos = this.cur;\n    if(this.root){\n      this.app.onLoad();\n      this.templateRender();\n      this.setRoot();\n    }\n    else{\n      return false\n      \n    }\n  }\n\n  templateRender(){\n    let html = this.app.template();\n    this.root.innerHTML = html;\n  }\n  \n  serverRender(){\n    // console.log('asdfasdfasdfdsa=========', this.app.state)\n    return this.app.template();\n  }\n}\n\nexport default Router;","const  setData = (dataLength = 30) => {\n  return new Array(dataLength).fill(0).map((ele, idx) => {\n    return {\n      id : idx+1, \n      title : `title${idx+1}`,\n      writer : `name${idx+1}`,\n      content : `content${idx+1}`,\n      date : `2022-1-${idx+1}`\n    }\n  })\n}\nconst totData = setData(200)\nmodule.exports = {\n  totData,\n\n  initialState : {\n    data : totData.slice().reverse().slice(0,5),\n    page : 1,\n    size : 5, \n    order : 'dsc',\n    filter : '',\n    name : '',\n    total : totData.length,\n  }\n  \n}\n\n","const { totData }= require('./Data.js')\n// ---- Query executor ---- \nconst queryExecutor = {\n\n  // SELECT * FROM _ WHERE all culumn LIKE '%keyword%' \n  filterByKeyWord : (keyword, data=totData) => {\n    // filter by search keyworkd\n    // console.log(\"datata\", data)\n    return keyword === \"\" \n    ? data \n    : data.filter( ele =>{\n        let bool = false \n        for(let [ key,val ] of Object.entries(ele)){\n          if(key === 'id' || key ==='date' || key === 'index') continue\n          // console.log( val, keyword)\n          if(!String(val).includes(keyword)) continue \n          bool = true \n          // console.log(ele) \n          break\n        }\n        return bool\n    })\n  },\n\n  // SELECT * FROM _ WHERE writer = name\n  filterByName : (name, data) => {\n    // filter by writer name\n    // console.log(\"datata\", data)\n\n    return  name === \"\" \n    ? data \n    : data.filter( ele =>{\n        let bool = false \n        for(let [ key,val ] of Object.entries(ele)){\n          if(key === 'writer' && String(val) === name ){\n            bool = true\n            break\n          }\n        }\n        return bool\n    })\n  },\n\n  // LIMIT & OFFSET \n  setRange : (page, size, offset, end) => {\n    // set view data range  \n    let _from = (page - 1) * size - offset; \n    _from = _from < 0 ? 0 : _from; \n\n    let _to = _from + size + offset;\n    _to = _to >= end ? end : _to; \n    // console.log(page, size, _from, _to)\n    return [_from, _to, end] \n  },\n  \n  // ORDER BY & INDEX\n  setIndexData : (order, _data) => {\n    _data = order === 'dsc' ? _data.reverse() : _data\n    \n    return _data.slice()\n      .map((item, idx) => {\n      item['index'] = idx\n      return item\n    })\n  }\n}\nmodule.exports = {\n  updateStateByQueryExecutor  : (state) =>{\n    let{ filter, name, order, page, size, data, total } = state \n  \n    page = Number(page); size= Number(size);\n    // console.log(\"executor=\", page, size, filter, name, order, data)\n    let filtered = queryExecutor.filterByKeyWord(filter);\n    // console.log(filtered)\n    \n    filtered = queryExecutor.filterByName(name, filtered);\n    // console.log(filtered)\n    \n    let [ from, to ] = queryExecutor.setRange(page, size, 0, filtered.length);\n  \n    let totFilterData = queryExecutor.setIndexData(order, filtered.slice());\n    data = totFilterData.slice(from, to);\n    total = totFilterData.length; \n  \n    state = { ...state, data, total }\n    // console.log(state)\n    return state \n  },\n  getPathURL : (state) => {\n    const { filter, name, order, data, total, page, size } = state\n    const id = `filter=${filter}&name=${name}&order=${order}&page=${page}&size=${size}&total=${total}`\n    \n    return id\n  }\n\n}\n","const { SSR } = require('../public/ssr.js')\n\nconst getStringHtml = async (context) => {\n  const { state } = context\n  // console.log(context)\n  // console.log(SSR.ssr_converter(context))\n  const ssrRendered = await SSR.ssr_converter(context).then(result)\n  const result = template(state, ssrRendered);\n  // console.log(result)\n  // console.log(typeof result)\n  \n  return !result \n    ? 'nothing to rend'\n    : result\n}\n\n\nconst template = (state, ssr_html) => {\n  return `\n  <!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Document</title>\n  <script>window.state=${JSON.stringify(state)}</script>\n</head>\n<body>\n  <div id='root'>\n    ${ssr_html} \n  </div>\n  <script src=\"./csr.js\"></script>\n</body>\n</html>\n  `\n}\n\nmodule.exports = getStringHtml\n","const { initialState } = require(\"./Data\");\n\nclass ServerStore{\n  state; \n  constructor(state){\n    this.state = state;\n  }\n  setState(newState){\n    this.state = { ...this.state, ...newState }\n  }\n}\n\n\n\nmodule.exports = new ServerStore(initialState);\n","/*global window, global*/\nvar util = require(\"util\")\nvar assert = require(\"assert\")\nfunction now() { return new Date().getTime() }\n\nvar slice = Array.prototype.slice\nvar console\nvar times = {}\n\nif (typeof global !== \"undefined\" && global.console) {\n    console = global.console\n} else if (typeof window !== \"undefined\" && window.console) {\n    console = window.console\n} else {\n    console = {}\n}\n\nvar functions = [\n    [log, \"log\"],\n    [info, \"info\"],\n    [warn, \"warn\"],\n    [error, \"error\"],\n    [time, \"time\"],\n    [timeEnd, \"timeEnd\"],\n    [trace, \"trace\"],\n    [dir, \"dir\"],\n    [consoleAssert, \"assert\"]\n]\n\nfor (var i = 0; i < functions.length; i++) {\n    var tuple = functions[i]\n    var f = tuple[0]\n    var name = tuple[1]\n\n    if (!console[name]) {\n        console[name] = f\n    }\n}\n\nmodule.exports = console\n\nfunction log() {}\n\nfunction info() {\n    console.log.apply(console, arguments)\n}\n\nfunction warn() {\n    console.log.apply(console, arguments)\n}\n\nfunction error() {\n    console.warn.apply(console, arguments)\n}\n\nfunction time(label) {\n    times[label] = now()\n}\n\nfunction timeEnd(label) {\n    var time = times[label]\n    if (!time) {\n        throw new Error(\"No such label: \" + label)\n    }\n\n    delete times[label]\n    var duration = now() - time\n    console.log(label + \": \" + duration + \"ms\")\n}\n\nfunction trace() {\n    var err = new Error()\n    err.name = \"Trace\"\n    err.message = util.format.apply(null, arguments)\n    console.error(err.stack)\n}\n\nfunction dir(object) {\n    console.log(util.inspect(object) + \"\\n\")\n}\n\nfunction consoleAssert(expression) {\n    if (!expression) {\n        var arr = slice.call(arguments, 1)\n        assert.ok(false, util.format.apply(null, arr))\n    }\n}\n","module.exports = require(\"assert\");","module.exports = require(\"core-js/modules/es.array.concat.js\");","module.exports = require(\"core-js/modules/es.array.fill.js\");","module.exports = require(\"core-js/modules/es.array.filter.js\");","module.exports = require(\"core-js/modules/es.array.for-each.js\");","module.exports = require(\"core-js/modules/es.array.from.js\");","module.exports = require(\"core-js/modules/es.array.includes.js\");","module.exports = require(\"core-js/modules/es.array.is-array.js\");","module.exports = require(\"core-js/modules/es.array.iterator.js\");","module.exports = require(\"core-js/modules/es.array.join.js\");","module.exports = require(\"core-js/modules/es.array.map.js\");","module.exports = require(\"core-js/modules/es.array.reverse.js\");","module.exports = require(\"core-js/modules/es.array.slice.js\");","module.exports = require(\"core-js/modules/es.function.bind.js\");","module.exports = require(\"core-js/modules/es.function.name.js\");","module.exports = require(\"core-js/modules/es.json.to-string-tag.js\");","module.exports = require(\"core-js/modules/es.math.to-string-tag.js\");","module.exports = require(\"core-js/modules/es.number.constructor.js\");","module.exports = require(\"core-js/modules/es.object.create.js\");","module.exports = require(\"core-js/modules/es.object.define-properties.js\");","module.exports = require(\"core-js/modules/es.object.define-property.js\");","module.exports = require(\"core-js/modules/es.object.entries.js\");","module.exports = require(\"core-js/modules/es.object.get-own-property-descriptor.js\");","module.exports = require(\"core-js/modules/es.object.get-own-property-descriptors.js\");","module.exports = require(\"core-js/modules/es.object.get-prototype-of.js\");","module.exports = require(\"core-js/modules/es.object.keys.js\");","module.exports = require(\"core-js/modules/es.object.set-prototype-of.js\");","module.exports = require(\"core-js/modules/es.object.to-string.js\");","module.exports = require(\"core-js/modules/es.promise.js\");","module.exports = require(\"core-js/modules/es.reflect.construct.js\");","module.exports = require(\"core-js/modules/es.regexp.exec.js\");","module.exports = require(\"core-js/modules/es.string.includes.js\");","module.exports = require(\"core-js/modules/es.string.iterator.js\");","module.exports = require(\"core-js/modules/es.symbol.description.js\");","module.exports = require(\"core-js/modules/es.symbol.iterator.js\");","module.exports = require(\"core-js/modules/es.symbol.js\");","module.exports = require(\"core-js/modules/es.symbol.to-string-tag.js\");","module.exports = require(\"core-js/modules/web.dom-collections.for-each.js\");","module.exports = require(\"core-js/modules/web.dom-collections.iterator.js\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"global-jsdom/register\");","module.exports = require(\"regenerator-runtime/runtime.js\");","module.exports = require(\"util\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","require('global-jsdom/register')\nconst express = require('express');\nconst cors = require('cors')\nconst fs =require('fs');\nconst path = require('path')\n\nconst server = express(); \nconst PORT = 3001;\n\nconst { updateStateByQueryExecutor, getPathURL} = require('./src/executor.js')\nconst getStringHtml = require('./src/ssr.service.js');\nconst store = require('./src/store.js');\nconst { initialState } = require('./src/Data')\n\nserver.options('*', cors());\nserver.use(express.json())\nserver.use(express.static(path.resolve(__dirname, 'public')));\n\nconst updateCache = (req, res) => {\n  console.log('cache update comming to here', req.query)\n  if(!req.query) return res.status(400).end();\n\n  store.setState(updateStateByQueryExecutor(req.query));\n  const { data, total } = store.state\n\n  res.json({ id : getPathURL(store.state), data, total })\n};\n\nconst updateState = async (req, res)=> {\n  if( !req.body ) return res.status(400).end(); \n  store.setState(req.body)\n  console.log('comming to /api/state')\n  return res.status(203).end();\n}\n\n\nserver.get('/', async (req, res) => {\n  console.log(req.query)\n  console.log('comming to basic path')\n  store.setState(initialState) \n  const redirectTo = `/page?` + getPathURL(store.state);\n \n  return res.redirect(redirectTo)  ;\n})\n\nserver.get('/page', async (req, res) => {\n  console.log('comming to server page not passed by bypass let me see what ')\n  const filePath = 'page?' + getPathURL(req.query)\n  const fileURL = path.resolve(__dirname,'../../client/resources' , 'index_'+ filePath +'.html');\n  let html ;\n    if(!fs.existsSync(fileURL)){\n      html = await getStringHtml({ url : '/', state : store.state })\n      await fs.writeFileSync(fileURL, html);\n      console.log('file not exists', fileURL)\n    }\n    else{\n      html = await fs.readFileSync(fileURL, 'utf-8');\n      console.log('fileexists', fileURL)\n    }\n\n  return res.send(html)\n})\n\nserver.get('/post-single', async (req, res) => {\n  console.log(req.url)\n  console.log(req.query);\n  console.log(store.state)\n  \n  const result = await getStringHtml({ url : '/post-single', state : store.state } )\n  console.log(result)\n  res.send(result)\n})\n\nserver.get('/api/cache', updateCache);\nserver.put('/api/state', updateState);\n\n\nserver.listen(PORT, ()=> {\n  console.log(\"server listning by Port= \"+PORT)\n})\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","s","constructor","state","name","this","components","child","curPos","oldPos","firstBonder","eventHandler","bind","secondBonder","secondEventHandler","setState","length","map","node","setRoot","root","el","querySelector","setEvent","template","renderHtml","join","render","innerHtml","newOne","innerHTML","requestAnimationFrame","PostListPage","super","push","PostListHeader","Postlist","Pagination","PostButton","Search","Paging","Sorting","SortButton","RefreshAll","filter","select","Number","size","selected","order","items","data","item","idx","id","title","writer","date","page","total","less","more","PostSinglePage","Header","Contents","BottomButton","index","console","log","content","ssr_converter","context","Promise","async","resolve","reject","url","store","cacheHandler","subscribe","app","initState","initial","server","history","pushState","location","origin","getCacheId","newState","updateView","keys","searchCache","renderAll","hydrate","router","cur","routeState","setRoutes","routes","document","onLoad","err","TypeError","serverRender","setRouteState","newVal","setPathCur","newCur","route","path","comPosition","templateRender","html","g","ssr_html","Error","setData","dataLength","Array","fill","ele","totData","module","initialState","slice","reverse","require","queryExecutor","filterByKeyWord","keyword","bool","entries","val","String","includes","filterByName","setRange","offset","end","_from","_to","setIndexData","_data","updateStateByQueryExecutor","filtered","from","to","totFilterData","getPathURL","SSR","getStringHtml","then","result","ssrRendered","JSON","stringify","ServerStore","express","cors","fs","PORT","options","use","json","__dirname","updateCache","req","res","query","status","updateState","body","redirectTo","redirect","filePath","fileURL","existsSync","writeFileSync","readFileSync","send","put","listen"],"sourceRoot":""}