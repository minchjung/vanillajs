{"version":3,"file":"server.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAIA,IAAsB;ACA1BA,OAAwB,WAACC,CAAD,EAAUC,CAAV,EAAUA;AACjC,WAAI,IAAIC,CAAR,IAAeD,CAAf;AACIF,UAAoBI,CAApBJ,CAAsBE,CAAtBF,EAAkCG,CAAlCH,KAAkCG,CAASH,EAAoBI,CAApBJ,CAAsBC,CAAtBD,EAA+BG,CAA/BH,CAA3CA,IACFK,OAAOC,cAAPD,CAAsBJ,CAAtBI,EAA+BF,CAA/BE,EAAoC;AAAEE,uBAAY,CAAd;AAAoBC,eAAKN,EAAWC,CAAXD;AAAzB,SAApCG,CADEL;AADJ;AAE0EG,KDHjD;AED1BH,OAAwB,WAACS,CAAD,EAAMC,CAAN;AAAA,aAAgBL,OAAOM,SAAPN,CAAiBO,cAAjBP,CAAgCQ,IAAhCR,CAAqCI,CAArCJ,EAA0CK,CAA1CL,CAAhB;AAAA,KFCE;AGA1BL,OAAyBC;AACH,4BAAXa,MAAW,IAAeA,OAAOC,WAAtB,IACpBV,OAAOC,cAAPD,CAAsBJ,CAAtBI,EAA+BS,OAAOC,WAAtCV,EAAmD;AAAEW,eAAO;AAAT,OAAnDX,CADoB,EAGrBA,OAAOC,cAAPD,CAAsBJ,CAAtBI,EAA+B,YAA/BA,EAA6C;AAAEW,gBAAO;AAAT,OAA7CX,CAHqB;AAGiC;AHJ7B,GAA1B;AAAA;;;;;;;AImFA;AAhFEY,qBAAoBC;AAAAA,UAANC,CAAMD,QAARC,IAAQD;AAAAA,mBAAFA,KAAEA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAClBE,WAAKC,UAALD,GAAgB,EAAhBA,EACAA,KAAKE,KAALF,GAAY,EADZA,EAEAA,KAAKD,IAALC,GAAYD,CAFZC,EAGAA,KAAKF,KAALE,GAAaF,CAHbE,EAIAA,KAAKG,MAALH,GAAc,CAJdA,EAKAA,KAAKI,MAALJ,GAAc,CALdA,EAOAA,KAAKK,WAALL,GAAmBA,KAAKM,YAALN,CAAkBO,IAAlBP,CAAuBA,IAAvBA,CAPnBA,EAQAA,KAAKQ,YAALR,GAAoBA,KAAKS,kBAALT,CAAwBO,IAAxBP,CAA6BA,IAA7BA,CARpBA;AAWFU;;AAoEF;AAAA;AAAA,aApEEA,kBAASZ,CAATY,EAASZ;AACPE,aAAKF,KAALE,GAAaF,CAAbE,EAEGA,KAAKC,UAALD,CAAgBW,MAAhBX,GAAyB,CAAzBA,IACDA,KAAKC,UAALD,CAAgBA,KAAKG,MAArBH,EAA6BU,QAA7BV,CAAsCF,CAAtCE,CAHFA,EAKGA,KAAKE,KAALF,CAAWW,MAAXX,GAAoB,CAApBA,IACDA,KAAKE,KAALF,CAAWY,GAAXZ,CAAea;AAAAA,iBAAQA,EAAKH,QAALG,CAAcf,CAAde,CAARA;AAAAA,SAAfb,CANFA;AASFc;AA0DF;AAAA;AAAA,aA1DEA,iBAAQC,CAARD,EAAQC;AACFf,aAAKe,IAALf,KAAYA,KAAKe,IAALf,GAAYe,CAAxBf,GACJA,KAAKgB,EAALhB,GAAWA,KAAKe,IAALf,CAAUiB,aAAVjB,YAA4BA,KAAKD,IAAjCC,EADPA,EAIDA,KAAKC,UAALD,CAAgBW,MAAhBX,GAAyB,CAAzBA,IACDA,KAAKC,UAALD,CAAgBA,KAAKG,MAArBH,EAA6Bc,OAA7Bd,CAAqCe,CAArCf,CALEA,EAQDA,KAAKE,KAALF,CAAWW,MAAXX,GAAoB,CAApBA,IACDA,KAAKE,KAALF,CAAWY,GAAXZ,CAAea;AAAAA,iBAAQA,EAAKC,OAALD,CAAaE,CAAbF,CAARA;AAAAA,SAAfb,CATEA,EAYJA,KAAKkB,QAALlB,EAZIA;AAeNkB;AA0CF;AAAA;AAAA,aA1CEA,qBAGAZ;AAuCF;AAAA;AAAA,aAvCEA,yBAIAG;AAmCF;AAAA;AAAA,aAnCEA,+BAIAU;AA+BF;AAAA;AAAA,aA/BEA;AACE,YAAIC,IAAW,EAAf;AAWA,eAVGpB,KAAKC,UAALD,CAAgBW,MAAhBX,GAAyB,CAAzBA,KACDoB,IAAapB,KAAKC,UAALD,CAAgBA,KAAKG,MAArBH,EAA6BmB,QAA7BnB,EADZA,GAMAA,KAAKE,KAALF,CAAWW,MAAXX,GAAoB,CAApBA,KACDoB,IAAapB,KAAKE,KAALF,CAAWY,GAAXZ,CAAea;AAAAA,iBAAQA,EAAKM,QAALN,EAARA;AAAAA,SAAfb,EAAwCqB,IAAxCrB,CAA6C,EAA7CA,CADZA,CANAA,4BAWSA,KAAKD,IAXdC,wBAYGoB,CAZHpB,yBAUH;AAQFsB;AAWF;AAAA;AAAA,aAXEA;AAAAA;;AAGEtB,aAAKgB,EAALhB,CAAQuB,SAARvB,GAAmBA,KAAKmB,QAALnB,EAAnBA,EACAwB,sBAAsB;AAAA,iBAAKxB,MAAKc,OAALd,EAAL;AAAA,SAAtBwB,CADAxB;AACgCc;AAOpC;;AAAA;AAAA;;MClFaW;;;;;AAEX5B,sBAAoBC;AAAAA;;AAAAA,UAANC,CAAMD,SAARC,IAAQD;AAAAA,oBAAFA,KAAEA;;AAAAA;;AAClB4B,iCAAM;AAAE3B,eAAF;AAAQD;AAAR,OAAN4B,GACA1B,OAAKE,KAALF,GAAa,EADb0B,EAEA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAgB,IAAI4B,CAAJ,CAAmB;AAAE7B,cAAO,gBAAT;AAA2BD;AAA3B,OAAnB,CAAhBE,CAFA0B,EAGA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAgB,IAAI6B,CAAJ,CAAa;AAAE9B,cAAO,UAAT;AAAsBD;AAAtB,OAAb,CAAhBE,CAHA0B,EAIA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAgB,IAAI8B,CAAJ,CAAe;AAAE/B,cAAO,YAAT;AAAuBD;AAAvB,OAAf,CAAhBE,CAJA0B;AADkB5B;AAKoCA;;;IAPxBiC;;MAYrBH;;;;;AAIX/B,sBAAoBC;AAAAA;;AAAAA,UAANC,CAAMD,SAARC,IAAQD;AAAAA,oBAAFA,KAAEA;;AAAAA;;AAClB4B,mCAAM;AAAE3B,eAAF;AAAQD;AAAR,OAAN4B,sEACA1B,OAAKE,KAALF,GAAa,EADb0B,EAEA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAIgC,CAAJ,CAAW;AAAEjC,cAAO,QAAT;AAAoBD;AAApB,OAAX,CAAjBE,CAFA0B,EAGA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAIiC,CAAJ,CAAY;AAAElC,cAAM,QAAR;AAAkBD;AAAlB,OAAZ,CAAjBE,CAHA0B,EAIA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAIkC,CAAJ,CAAa;AAAEnC,cAAO,SAAT;AAAoBD;AAApB,OAAb,CAAjBE,CAJA0B,EAKA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAImC,CAAJ,CAAgB;AAAEpC,cAAO,YAAT;AAAuBD;AAAvB,OAAhB,CAAjBE,CALA0B;AADkB5B;AAMsCA;;;IAVxBiC;;MAgBvBC;;;;;;;;;;;;;aAGVb;AAEC,wMADgBnB,KAAKF,KAALE,CAAWoC,MAAXpC,IAOe,EAN/B;AAM+B;;;;IAXP+B;;MAmBfE;;;;;;;;;;;;;aAGXd;AACE,YAAMkB,IAASC,OAAOtC,KAAKF,KAALE,CAAWuC,IAAlBD,CAAf;AACA,oHAEoCD,CAFpC,8GAImC,MAAXA,CAAW,GAAG,UAAH,GAAgB,EAJnD,qDAKoC,OAAXA,CAAW,GAAI,UAAJ,GAAiB,EALrD,sDAMoC,OAAXA,CAAW,GAAI,UAAJ,GAAiB,EANrD;AAMqD;;;;IAX7BN;;MAmBfG;;;;;;;;;;;;;aAGXf;AACE,YAAMqB,IAAWxC,KAAKF,KAALE,CAAWyC,KAA5B;AACA,0PAMuB,UAAbD,CAAa,GAAO,UAAP,GAAoB,EAN3C,2GASuB,UAAbA,CAAa,GAAO,UAAP,GAAoB,EAT3C;AAS2C;;;;IAdlBT;;MAsBhBI;;;;;;;;;;;;;aAEXhB;AACE,eAAO,8LAAP;AAAO;;;;IAHqBY;;MAcnBF;;;;;;;;;;;;;aAGXV;AAEE,YAAMuB,IAAQ1C,KAAKF,KAALE,CAAW2C,IAAzB;AAAA,YACMC,IAA8B,OAApB5C,KAAKF,KAALE,CAAWD,IAAS,GAAI,mBAAJ,GAA0B,EAD9D;AAGA,2QASwB,MAAjB2C,EAAM/B,MAAW,GAAI,EAAJ,GAClB+B,EAAM9B,GAAN8B,CAAW,UAACG,CAAD,EAAOC,CAAP;AAAA,sDACMD,EAAKE,EADX,sCAECF,EAAKE,EAFN,cAEYF,EAAKE,EAFjB,wDAGiBF,EAAKG,KAHtB,yDAIkBJ,CAJlB,eAI8BC,EAAKI,MAJnC,oCAKHJ,EAAKK,IAALL,CAAUM,KAAVN,CAAgB,GAAhBA,EAAqB,CAArBA,CALG;AAAA,SAAXH,EAOCrB,IAPDqB,CAOM,EAPNA,CAVN;AAiBY;;;;IAzBcX;;MA+BxBD;;;;;AAEJjC,sBAAoBC;AAAAA;;AAAAA,UAANC,CAAMD,SAARC,IAAQD;AAAAA,oBAAFA,KAAEA;;AAAAA;;AAClB4B,kCAAM;AAAE3B,eAAF;AAAQD;AAAR,OAAN4B,GACA1B,OAAKE,KAALF,GAAa,EADb0B,EAEA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAIoD,CAAJ,CAAe;AAAErD,cAAM,mBAAR;AAA6BD;AAA7B,OAAf,CAAjBE,CAFA0B,EAGA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAIqD,CAAJ,CAAe;AAAEtD,cAAM,YAAR;AAAsBD;AAAtB,OAAf,CAAjBE,CAHA0B;AADkB5B;AAIoCA;;;IANjCiC;;MAWZsB;;;;;;;;;;;;;aAEXlC;AACE,eAAO,gFAAP;AAAO;;;;IAHqBY;;MAanBqB;;;;;;;;;;;;;;;;;;;;;;;;;aAIXjC;AACE,0BAAqCnB,KAAKF,KAA1C;AAAA,YAAQwD,CAAR,eAAMA,IAAN;AAAA,YAAcf,CAAd,eAAYA,IAAZ;AAAA,YAAoBgB,CAApB,eAAkBA,KAAlB;AAAA,YAA2BZ,CAA3B,eAAyBA,IAAzB;AAAA,YACMa,CADN,GACalB,OAAOgB,CAAPhB,IAAe,CAD5B;AAAA,YAEMmB,CAFN,GAEanB,OAAOC,CAAPD,IAAaA,OAAOgB,CAAPhB,CAAbA,GAA4BA,OAAOiB,CAAPjB,CAFzC;AAKA,mEAEuB,MAAlBA,OAAOiB,CAAPjB,CAAkB,GAAI,sDAAJ,GAA6D,EAFpF,qBAGKkB,IAAO,wCAAPA,GAAkD,EAHvD,qBAIKC,IAAO,yCAAPA,GAAmD,EAJxD,qBAKKnB,OAAOiB,CAAPjB,KAAOiB,CAAWE,CAAlBnB,GAAyB,iDAAzBA,GAA6E,EALlF;AAKkF;;;;IAftDP;;AC/J/B,MAOD2B,IAPoB;AAClBC,WAAQ,CADU;AAElBC,YAFkB,oBAETD,CAFS,EAETA;AACP3D,WAAK2D,KAAL3D,GAAa2D,CAAb3D;AAAa2D;AAHG,GAAnB;;MCGYE;;;;;AAIXhE,sBAAoBC;AAAAA;;AAAAA,UAANC,CAAMD,SAARC,IAAQD;AAAAA,oBAAFA,KAAEA;;AAAAA;;AAClB4B,oCAAM;AAAE3B,eAAF;AAAQD;AAAR,OAAN4B,sEAEA1B,OAAKE,KAALF,GAAa,EAFb0B,EAGA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAI8D,CAAJ,CAAW;AAAE/D,cAAO,QAAT;AAAmBD;AAAnB,OAAX,CAAjBE,CAHA0B,EAIA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAI+D,CAAJ,CAAa;AAAEhE,cAAO,UAAT;AAAqBD;AAArB,OAAb,CAAjBE,CAJA0B,EAKA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAIgE,CAAJ,CAAiB;AAAEjE,cAAO,cAAT;AAAyBD;AAAzB,OAAjB,CAAjBE,CALA0B;AADkB5B;AAMyCA;;;IAV3BiC;;MAgBvB+B;;;;;;;;;;;;;aAGX3C;AAGE,YAAMwC,IAAQD,OAAd;AAAA,YACMf,IAAO3C,KAAKF,KAALE,CAAW2C,IAAX3C,CAAgBoC,MAAhBpC,CAAuBiE;AAAAA,iBAAOA,EAAIlB,EAAJkB,KAAY3B,OAAOqB,CAAPrB,CAAnB2B;AAAAA,SAAvBjE,EAAyD,CAAzDA,CADb;AAGA,sRASO2C,KAAwB,MAAhBA,EAAKhC,MAAbgC,+DAGYA,EAAKI,EAHjBJ,0CAIYA,EAAKK,KAJjBL,0CAKYA,EAAKM,MALjBN,0CAMYA,EAAKO,IAALP,CAAUQ,KAAVR,CAAgB,GAAhBA,EAAqB,CAArBA,CANZA,mCACG,EAVV;AAUU;;;;IAnBcZ;;MAiCfgC;;;;;;;;;;;;;aAGX5C;AACE,YAAMwC,IAAQD,OAAd;AAAA,YACMf,IAAO3C,KAAKF,KAALE,CAAW2C,IAAX3C,CAAgBoC,MAAhBpC,CAAuBiE;AAAAA,iBAAOA,EAAIlB,EAAJkB,KAAY3B,OAAOqB,CAAPrB,CAAnB2B;AAAAA,SAAvBjE,EAAyD,CAAzDA,CADb;AAGA,gEAEQ2C,KAAwB,MAAhBA,EAAKhC,MAAbgC,wEAE0DA,EAAKuB,OAF/DvB,mBACA,6BAHR;AAGQ;;;;IAVkBZ;;MAkBjBiC;;;;;;;;;;;;;aAEX7C;AACE,eAAO,qMAAP;AAAO;;;;IAHuBY;;MCpErBoC;;;;;AAEXtE,sBAAoBC;AAAAA,UAANC,CAAMD,SAARC,IAAQD;AAAAA,oBAAFA,KAAEA;;AAAAA;;AAAAA,iCACZ;AAAEC,eAAF;AAAQD;AAAR,OADYA;AAIpBqB;;;;aAAAA;AACE,eAAO,yIAAP;AAAO;;;;IAPwBY;;MCCtBqC;;;;;AAIXvE,sBAAoBC;AAAAA;;AAAAA,UAANC,CAAMD,SAARC,IAAQD;AAAAA,oBAAFA,KAAEA;;AAAAA;;AAClB4B,oCAAM;AAAE3B,eAAF;AAAQD;AAAR,OAAN4B,sEAEA1B,OAAKE,KAALF,GAAa,EAFb0B,EAGA1B,OAAKE,KAALF,CAAW2B,IAAX3B,CAAiB,IAAIqE,CAAJ,CAAa;AAAEtE,cAAO,UAAT;AAAqBD;AAArB,OAAb,CAAjBE,CAHA0B;AADkB5B;AAIiCA;;;IARrBiC;;MAerBsC;;;;;;;;;;;;;aAEXlD;AAEE,YAAIwC,CAAJ;AAQA,eARWhB,MAERe,YACDC,IAAQD,OAARC,EACAhB,OAAO3C,KAAKF,KAALE,CAAW2C,IAAX3C,CAAgBoC,MAAhBpC,CAAuBiE;AAAAA,iBAAOA,EAAIlB,EAAJkB,KAAY3B,OAAOqB,CAAPrB,CAAnB2B;AAAAA,SAAvBjE,EAAyD,CAAzDA,CAFN,CAFQ2C,EAMXA,OAAO,IANIA,gJAYOA,OAAOA,KAAKI,EAAZJ,GAAgB,EAZvBA,sKAiBQA,OAAOA,KAAKK,KAAZL,GAAoB,EAjB5BA,4NAyBQA,OAAMA,KAAKM,MAAXN,GAAoB,EAzB5BA,0IA4BuEA,OAAOA,KAAKuB,OAAZvB,GAAsB,EA5B7FA,qFA6B6CA,OAAOA,KAAKI,EAAZJ,GAAiB,EA7B9DA,mIAQX;AAqByE;;;;IAjC/CZ;;ACA9B;AAAA;;AAAA;;AAVElC,4BAAoBC;AAAAA;;AAAAA,UAANC,CAAMD,SAARC,IAAQD;AAAAA,oBAAFA,KAAEA;;AAAAA;;AAClB4B,mCAAM;AAAE3B,eAAF;AAAQD;AAAR,OAAN4B,GACA1B,OAAKC,UAALD,CAAgB2B,IAAhB3B,CAAqB,IAAIyB,CAAJ,CAAiB;AAAE1B,cAAO,cAAT;AAA0BD;AAA1B,OAAjB,CAArBE,CADA0B,EAEA1B,OAAKC,UAALD,CAAgB2B,IAAhB3B,CAAqB,IAAI6D,CAAJ,CAAmB;AAAE9D,cAAM,YAAR;AAAsBD;AAAtB,OAAnB,CAArBE,CAFA0B,EAGA1B,OAAKC,UAALD,CAAgB2B,IAAhB3B,CAAqB,IAAIoE,CAAJ,CAAiB;AAAErE,cAAM,cAAR;AAAwBD;AAAxB,OAAjB,CAArBE,CAHA0B,EAIA1B,OAAKC,UAALD,CAAgB2B,IAAhB3B,CAAqB,IAAImE,CAAJ,CAAkB;AAAEpE,cAAM,cAAR;AAAwBD;AAAxB,OAAlB,CAArBE,CAJA0B;AADkB5B;AAK6CA;;AAKnE;AAAA,IAZkBiC,CAYlB,GAAuB;AAAEhC,UAAO;AAAT,GAAvB;AAAA,MCeAuE,IA/BmB,SA+BnBA,CA/BmB,CAACC,CAAD,EAAMC,CAAN,EAAsB;AAAA,QAAXC,CAAW,uEAAXA,CAAW;AAEvC,QAAMC,IAAS;ACAf7E;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAAAA;;AAEEG,aAAK2E,GAAL3E,GAAW,CAAXA,EACAA,KAAK4E,UAAL5E,GAAkB;AAAEJ,iBAAQ;AAAV,SADlBI;AAKF6E;;ADPe;AAAA;AAAA,eCOfA,mBAAUL,CAAVK,EAAUL;AACRxE,eAAKwE,GAALxE,GAAWwE,CAAXxE;AAGF8E;ADXe;AAAA;AAAA,eCWfA,mBAAWC,CAAXD,EAAWC;AACT/E,eAAK+E,MAAL/E,GAAc+E,CAAd/E;AAGFc;ADfe;AAAA;AAAA,eCefA,iBAAQC,CAARD,EAAQC;AACFf,eAAKe,IAALf,IAAce,CAAdf,KAAoBA,KAAKe,IAALf,GAAYgF,SAAS/D,aAAT+D,CAAuB,OAAvBA,CAAhChF,GACAA,KAAKe,IAALf,KAAWA,KAAKe,IAALf,GAAYe,CAAvBf,CADAA;;AAGJ;AACEA,iBAAKwE,GAALxE,CAASc,OAATd,CAAiBA,KAAKe,IAAtBf,GACAA,KAAKwE,GAALxE,CAASiF,MAATjF,EADAA;AAID,WALD,CAKC,OAAMkF,CAAN,EAAMA;AACL,gBAAGA,aAAeC,SAAlB,EACE,OAAOnF,KAAKoF,YAALpF,EAAP;AAAYoF;AAMlBxB;ADhCe;AAAA;AAAA,eCgCfA,kBAASD,CAATC,EAASD;AACP3D,eAAK2D,KAAL3D,GAAYsC,OAAOqB,CAAPrB,CAAZtC;AAGFqF;ADpCe;AAAA;AAAA,eCoCfA,oBAAWC,CAAXD,EAAgC;AAAA,cAAbD,CAAa,uEAAbA,CAAa;AAE9BE,cAAoB,YAAXA,CAAW,GAAU,GAAV,GAAgBA,CAApCA,EACAtF,KAAK2E,GAAL3E,GAAWA,KAAK+E,MAAL/E,CAAYoC,MAAZpC,CACTuF;AAAAA,mBAASA,EAAMC,IAAND,KAAeD,CAAxBC;AAAAA,WADSvF,EACwB,CADxBA,EAC2ByF,WAFtCH,EAIAtF,KAAKwE,GAALxE,CAASG,MAATH,GAAkBA,KAAK2E,GAJvBW,EAMKF,MACAM,SAASC,MAATD,CAAgBE,QAAhBF,CAAyB,OAAzBA,KACD1F,KAAK4D,QAAL5D,CAAc0F,SAASC,MAATD,CAAgBvC,KAAhBuC,CAAsB,GAAtBA,EAA2B,CAA3BA,CAAd1F,CADC0F,EAGH1F,KAAK6F,cAAL7F,EAJGoF,CANLE;AAeFO;ADrDe;AAAA;AAAA,eCqDfA;AACE7F,eAAKe,IAALf,CAAUuB,SAAVvB,GAAsBA,KAAKwE,GAALxE,CAASmB,QAATnB,EAAtBA,EACAA,KAAKc,OAALd,CAAaA,KAAKe,IAAlBf,CADAA;AAIFoF;AD1De;AAAA;AAAA,eC0DfA;AAEE,iBAAOpF,KAAKwE,GAALxE,CAASmB,QAATnB,EAAP;AAAgBmB;AD5DH;;AAAA;AAAA,UAAf;AA0BA,WAxBAuD,EAAOG,SAAPH,CAAiBF,CAAjBE,GACAA,EAAOI,SAAPJ,CACE,CACE;AAAEc,YAAO,GAAT;AACEC,mBAAc;AADhB,KADF,EAIE;AAAED,YAAO,cAAT;AACEC,mBAAc;AADhB,KAJF,EAOE;AAAED,YAAO,YAAT;AACEC,mBAAc;AADhB,KAPF,EAUE;AACED,YAAO,aADT;AAEEC,mBAAc;AAFhB,KAVF,CADFf,CADAA,EAmBKD,KAEHC,EAAO5D,OAAP4D,CAAeM,SAAS/D,aAAT+D,CAAuB,OAAvBA,CAAfN,CArBFA,EAwBOA,CAAP;AAAOA,GDZT;;AGdO,WAASoB,CAAT,CAAwBC,CAAxB,EAAwBA;AAC7B,WAAO,IAAIC,OAAJ;AAAA,0EAAYC,iBAAOC,CAAPD,EAAgBE,CAAhBF;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAEX1B,iBAFW0B,GAEWF,CAFXE,CAEb1B,GAFa0B,EAENnG,CAFMmG,GAEWF,CAFXE,CAERnG,KAFQmG,EAECtC,CAFDsC,GAEWF,CAFXE,CAEDtC,KAFCsC;AAKXvB,iBALWuB,GAKF3B,EAAWC,CAAX,EAAgB6B,CAAhB,EAAgB,CAAK,CAArB,CALEH;;AAOjB;AACEG,6BAAatG,CAAb,GACA4E,EAAOW,UAAPX,CAAkBH,CAAlBG,EAAkBH,CAAK,CAAvBG,CADA,EAGkB,MAAfA,EAAOC,GAAQ,IAAoB,MAAfD,EAAOC,GAAZ,IAChBjB,WAAoBpB,OAAOqB,CAAPrB,CAApB,CAJF,EAOA+D,IAAU3B,EAAOU,YAAPV,EAPV;AASD,iBAVD,CAUC,OAAMQ,CAAN,EAAMA;AACLR,oBAAOW,UAAPX,CAAkB,aAAlBA,EAAkB,CAAe,CAAjCA,GACA2B,IAAW3B,EAAOU,YAAPV,EADXA;AAIF;;AAtBiBuB,iDAsBTI,IACNH,EAASG,CAATH,CADMG,GAENF,EAAQ,IAAIG,KAAJ,CAAU,WAAV,CAARH,CAxBeF;;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,OAAZ;;AAAA;AAAA;AAAA;AAAA,QAAP;;;;;;;;;;;;;;;;;;;;;;;ACLF,IAAMM,GAAG,GAAG,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,CAAZ;;AACA,IAAOC,OAAO,GAAG,SAAVA,OAAU,GAAqB;AAAA,MAApBC,UAAoB,uEAAP,EAAO;AACpC,SAAO,IAAIC,KAAJ,CAAUD,UAAV,EAAsBE,IAAtB,CAA2B,CAA3B,EAA8B/F,GAA9B,CAAkC,UAACqD,GAAD,EAAMnB,GAAN,EAAc;AACrD,QAAI8D,GAAG,GAAG9D,GAAG,GAAG,CAAhB;AACA,QAAM+D,GAAG,GAAGD,GAAG,IAAI,EAAP,GAAY,CAAZ,GAAgBA,GAAG,IAAI,EAAP,GAAY,CAAZ,GAAgBA,GAAG,IAAI,EAAP,GACxC,CADwC,GACpCA,GAAG,IAAI,GAAP,GAAa,CAAb,GAAiBA,GAAG,IAAI,GAAP,GAAa,CAAb,GAAiBA,GAAG,IAAI,GAAP,GAAa,CAAb,GAAiB,CAD3D;AAEA,WAAO;AACL7D,MAAAA,EAAE,EAAGD,GAAG,GAAC,CADJ;AAELE,MAAAA,KAAK,iBAAWF,GAAG,GAAC,CAAf,CAFA;AAGLG,MAAAA,MAAM,gBAAUH,GAAG,GAAC,CAAd,CAHD;AAILoB,MAAAA,OAAO,mBAAapB,GAAG,GAAC,CAAjB,CAJF;AAKLI,MAAAA,IAAI,iBAAW2D,GAAX,cAAkBD,GAAG,GAACL,GAAG,CAACM,GAAG,GAAC,CAAL,CAAzB;AALC,KAAP;AAOD,GAXM,CAAP;AAYD,CAbD;;AAcA,IAAIC,OAAO,GAAGN,OAAO,CAAC,GAAD,CAArB;AAEAO,MAAM,CAAClI,OAAP,GAAiBiI,OAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBA,IAAIE,GAAG,GAAGC,mBAAO,CAAC,gCAAD,CAAjB;;AACA,IAAIH,OAAO,GAAGE,GAAd;AAEA,IAAIE,YAAY,GAAG;AACjBvE,EAAAA,IAAI,EAAGmE,OAAO,CAACK,KAAR,GAAgBC,OAAhB,GAA0BD,KAA1B,CAAgC,CAAhC,EAAkC,CAAlC,CADU;AAEjB7D,EAAAA,IAAI,EAAG,CAFU;AAGjBf,EAAAA,IAAI,EAAG,CAHU;AAIjBE,EAAAA,KAAK,EAAG,KAJS;AAKjBL,EAAAA,MAAM,EAAG,EALQ;AAMjBrC,EAAAA,IAAI,EAAG,EANU;AAOjBwD,EAAAA,KAAK,EAAGuD,OAAO,CAACnG,MAPC;AAQjBgD,EAAAA,KAAK,EAAG;AARS,CAAnB,EAWA;;AACA,IAAM0D,aAAa,GAAG;AAEpB;AACAC,EAAAA,eAAe,EAAG,yBAACC,OAAD,EAA2B;AAAA,QAAjB5E,IAAiB,uEAAZmE,OAAY;AAC3C;AACA;AACA,WAAOS,OAAO,KAAK,EAAZ,GACL5E,IADK,GAELA,IAAI,CAACP,MAAL,CAAa,UAAA6B,GAAG,EAAG;AACjB,UAAIuD,IAAI,GAAG,KAAX;;AACA,yCAAuBvI,MAAM,CAACwI,OAAP,CAAexD,GAAf,CAAvB,qCAA2C;AAAvC;AAAA,YAAMlF,GAAN;AAAA,YAAU2I,GAAV;;AACF,YAAG3I,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAI,MAAvB,IAAiCA,GAAG,KAAK,OAA5C,EAAqD,SADZ,CAEzC;;AACA,YAAG,CAAC4I,MAAM,CAACD,GAAD,CAAN,CAAY9B,QAAZ,CAAqB2B,OAArB,CAAJ,EAAmC;AACnCC,QAAAA,IAAI,GAAG,IAAP,CAJyC,CAKzC;;AACA;AACD;;AACD,aAAOA,IAAP;AACH,KAXC,CAFF;AAcD,GApBmB;AAsBpB;AACAI,EAAAA,YAAY,EAAG,sBAAC7H,IAAD,EAAO4C,IAAP,EAAgB;AAC7B;AACA;AAEA,WAAQ5C,IAAI,KAAK,EAAT,GACN4C,IADM,GAENA,IAAI,CAACP,MAAL,CAAa,UAAA6B,GAAG,EAAG;AACjB,UAAIuD,IAAI,GAAG,KAAX;;AACA,2CAAuBvI,MAAM,CAACwI,OAAP,CAAexD,GAAf,CAAvB,wCAA2C;AAAvC;AAAA,YAAMlF,GAAN;AAAA,YAAU2I,GAAV;;AACF,YAAG3I,GAAG,KAAK,QAAR,IAAoB4I,MAAM,CAACD,GAAD,CAAN,KAAgB3H,IAAvC,EAA6C;AAC3CyH,UAAAA,IAAI,GAAG,IAAP;AACA;AACD;AACF;;AACD,aAAOA,IAAP;AACH,KATC,CAFF;AAYD,GAvCmB;AAyCpB;AACAK,EAAAA,QAAQ,EAAG,kBAACvE,IAAD,EAAOf,IAAP,EAAauF,MAAb,EAAqBC,GAArB,EAA6B;AACtC;AACA,QAAIC,KAAK,GAAG,CAAC1E,IAAI,GAAG,CAAR,IAAaf,IAAb,GAAoBuF,MAAhC;;AACAE,IAAAA,KAAK,GAAGA,KAAK,GAAG,CAAR,GAAY,CAAZ,GAAgBA,KAAxB;;AAEA,QAAIC,GAAG,GAAGD,KAAK,GAAGzF,IAAR,GAAeuF,MAAzB;;AACAG,IAAAA,GAAG,GAAGA,GAAG,IAAIF,GAAP,GAAaA,GAAb,GAAmBE,GAAzB,CANsC,CAOtC;;AACA,WAAO,CAACD,KAAD,EAAQC,GAAR,EAAaF,GAAb,CAAP;AACD,GAnDmB;AAqDpB;AACAG,EAAAA,YAAY,EAAG,sBAACzF,KAAD,EAAQ0F,KAAR,EAAkB;AAC/BA,IAAAA,KAAK,GAAG1F,KAAK,KAAK,KAAV,GAAkB0F,KAAK,CAACf,OAAN,EAAlB,GAAoCe,KAA5C;AAEA,WAAOA,KAAK,CAAChB,KAAN,GACJvG,GADI,CACA,UAACiC,IAAD,EAAOC,GAAP,EAAe;AACpBD,MAAAA,IAAI,CAAC,OAAD,CAAJ,GAAgBC,GAAhB;AACA,aAAOD,IAAP;AACD,KAJM,CAAP;AAKD;AA9DmB,CAAtB;AAgEAkE,MAAM,CAAClI,OAAP,GAAiB;AACfuJ,EAAAA,0BAA0B,EAAI,oCAACtI,KAAD,EAAU;AACtC,iBAAsDA,KAAtD;AAAA,QAAKsC,MAAL,UAAKA,MAAL;AAAA,QAAarC,IAAb,UAAaA,IAAb;AAAA,QAAmB0C,KAAnB,UAAmBA,KAAnB;AAAA,QAA0Ba,IAA1B,UAA0BA,IAA1B;AAAA,QAAgCf,IAAhC,UAAgCA,IAAhC;AAAA,QAAsCI,IAAtC,UAAsCA,IAAtC;AAAA,QAA4CY,KAA5C,UAA4CA,KAA5C;AAEAD,IAAAA,IAAI,GAAGhB,MAAM,CAACgB,IAAD,CAAb;AAAqBf,IAAAA,IAAI,GAAED,MAAM,CAACC,IAAD,CAAZ,CAHiB,CAItC;;AACA,QAAI8F,QAAQ,GAAGhB,aAAa,CAACC,eAAd,CAA8BlF,MAA9B,CAAf,CALsC,CAMtC;;AAEAiG,IAAAA,QAAQ,GAAGhB,aAAa,CAACO,YAAd,CAA2B7H,IAA3B,EAAiCsI,QAAjC,CAAX,CARsC,CAStC;;AAEA,gCAAmBhB,aAAa,CAACQ,QAAd,CAAuBvE,IAAvB,EAA6Bf,IAA7B,EAAmC,CAAnC,EAAsC8F,QAAQ,CAAC1H,MAA/C,CAAnB;AAAA;AAAA,QAAM2H,IAAN;AAAA,QAAYC,EAAZ;;AAEA,QAAIC,aAAa,GAAGnB,aAAa,CAACa,YAAd,CAA2BzF,KAA3B,EAAkC4F,QAAQ,CAAClB,KAAT,EAAlC,CAApB;AACAxE,IAAAA,IAAI,GAAG6F,aAAa,CAACrB,KAAd,CAAoBmB,IAApB,EAA0BC,EAA1B,CAAP;AACAhF,IAAAA,KAAK,GAAGiF,aAAa,CAAC7H,MAAtB;AAEAb,IAAAA,KAAK,mCAAQA,KAAR;AAAe6C,MAAAA,IAAI,EAAJA,IAAf;AAAqBY,MAAAA,KAAK,EAALA;AAArB,MAAL,CAjBsC,CAkBtC;;AACA,WAAOzD,KAAP;AACD,GArBc;AAsBf2I,EAAAA,UAAU,EAAG,oBAAC3I,KAAD,EAAW;AACtB,QAAQsC,MAAR,GAAyDtC,KAAzD,CAAQsC,MAAR;AAAA,QAAgBrC,IAAhB,GAAyDD,KAAzD,CAAgBC,IAAhB;AAAA,QAAsB0C,KAAtB,GAAyD3C,KAAzD,CAAsB2C,KAAtB;AAAA,QAA6BE,IAA7B,GAAyD7C,KAAzD,CAA6B6C,IAA7B;AAAA,QAAmCY,KAAnC,GAAyDzD,KAAzD,CAAmCyD,KAAnC;AAAA,QAA0CD,IAA1C,GAAyDxD,KAAzD,CAA0CwD,IAA1C;AAAA,QAAgDf,IAAhD,GAAyDzC,KAAzD,CAAgDyC,IAAhD;AACA,QAAMQ,EAAE,oBAAaX,MAAb,mBAA4BrC,IAA5B,oBAA0C0C,KAA1C,mBAAwDa,IAAxD,mBAAqEf,IAArE,CAAR;AAEA,WAAOQ,EAAP;AACD,GA3Bc;AA6Bf2F,EAAAA,UAAU,EAAG,0BAAqC;AAAA,QAAjCzF,MAAiC,QAAjCA,MAAiC;AAAA,QAAzBD,KAAyB,QAAzBA,KAAyB;AAAA,QAAjBkB,OAAiB,QAAjBA,OAAiB;AAAA,QAARnB,EAAQ,QAARA,EAAQ;AAChD;AACA+D,IAAAA,OAAO,GAAGA,OAAO,CAAClG,GAAR,CAAa,UAAAqD,GAAG,EAAI;AAE5B,UAAI3B,MAAM,CAAC2B,GAAG,CAAClB,EAAL,CAAN,KAAmBT,MAAM,CAACS,EAAD,CAA7B,EAAoC;AAClCkB,QAAAA,GAAG,CAAChB,MAAJ,GAAaA,MAAb;AACAgB,QAAAA,GAAG,CAACjB,KAAJ,GAAYA,KAAZ;AACAiB,QAAAA,GAAG,CAACC,OAAJ,GAAcA,OAAd;AACD;;AACD,aAAOD,GAAP;AACD,KARS,CAAV,CAFgD,CAWhD;;AACA,WAAO6C,OAAP;AACD,GA1Cc;AA4Cf6B,EAAAA,UAAU,EAAG,2BAAiC;AAAA,QAA7B1F,MAA6B,SAA7BA,MAA6B;AAAA,QAArBD,KAAqB,SAArBA,KAAqB;AAAA,QAAdkB,OAAc,SAAdA,OAAc;AAC5C,QAAMnB,EAAE,GAAG+D,OAAO,CAACA,OAAO,CAACnG,MAAR,GAAgB,CAAjB,CAAP,CAA2BoC,EAA3B,GAAgC,CAA3C;AACA+D,IAAAA,OAAO,CAACnF,IAAR,CAAa;AACXoB,MAAAA,EAAE,EAAFA,EADW;AACPE,MAAAA,MAAM,EAANA,MADO;AACCD,MAAAA,KAAK,EAALA,KADD;AACQkB,MAAAA,OAAO,EAAPA,OADR;AACiBhB,MAAAA,IAAI,EAAE,IAAI0F,IAAJ,GAAWC,WAAX;AADvB,KAAb;AAGA,WAAO/B,OAAP;AACD,GAlDc;AAoDfgC,EAAAA,UAAU,EAAG,oBAAE/F,EAAF,EAAU;AACrB,SAAI,IAAIgG,CAAC,GAAG,CAAZ,EAAgBA,CAAC,GAAGjC,OAAO,CAACnG,MAA5B,EAAqCoI,CAAC,EAAtC,EAAyC;AACvC,UAAIjC,OAAO,CAACiC,CAAD,CAAP,CAAWhG,EAAX,KAAkBT,MAAM,CAACS,EAAD,CAA5B,EAAmC+D,OAAO,CAACkC,MAAR,CAAeD,CAAf,EAAiB,CAAjB;AACpC;;AACD,WAAOjC,OAAP;AACD,GAzDc;AA2DfmC,EAAAA,eAAe,EAAG,2BAAM;AACtB/B,IAAAA,YAAY,CAACvE,IAAb,GAAoBmE,OAAO,CAACK,KAAR,GAAgBC,OAAhB,GAA0BD,KAA1B,CAAgC,CAAhC,EAAkC,CAAlC,CAApB;AACA,WAAOD,YAAP;AACD;AA9Dc,CAAjB;;;;;;;;;;;;;;;;;;;;;;;;;AC/EA,eAAgBD,mBAAO,CAAC,yCAAD,CAAvB;AAAA,IAAQiC,GAAR,YAAQA,GAAR;;AAEA,IAAMC,aAAa;AAAA,qEAAG,iBAAOpD,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAEZjG,YAAAA,KAFY,GAEFiG,OAFE,CAEZjG,KAFY;AAAA;AAAA,mBAIMoJ,GAAG,CAACpD,aAAJ,CAAkBC,OAAlB,EAA2BqD,IAA3B,CAAgCC,MAAhC,CAJN;;AAAA;AAIdC,YAAAA,WAJc;AAKdD,YAAAA,MALc,GAKLlI,QAAQ,CAACrB,KAAD,EAAQwJ,WAAR,CALH;AAAA,6CAObD,MAAM,GACTA,MADS,GAETlI,QAAQ,CAACrB,KAAD,EAAQ,IAAR,CATQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbqJ,aAAa;AAAA;AAAA;AAAA,GAAnB;;AAaA,IAAMhI,QAAQ,GAAG,SAAXA,QAAW,CAACrB,KAAD,EAAQuG,QAAR,EAAqB;AACpC,6RAQuBkD,IAAI,CAACC,SAAL,CAAe1J,KAAf,CARvB,gEAYIuG,QAAQ,GAAGA,QAAH,GAAc,EAZ1B;AAkBD,CAnBD;;AAqBAU,MAAM,CAAClI,OAAP,GAAiBsK,aAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICnCMM;AAEJ,uBAAY3J,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,SAAKA,KAAL,GAAaA,KAAb;AACD;;;;WACD,kBAAS4J,QAAT,EAAkB;AAChB,WAAK5J,KAAL,mCAAkB,KAAKA,KAAvB,GAAiC4J,QAAjC;AACD;;;;;;AAKH3C,MAAM,CAAClI,OAAP,GAAiB;AAAE8K,EAAAA,KAAK,EAAI,IAAIF,WAAJ;AAAX,CAAjB;;;;;;;;;;ACbA;AACA,WAAW,mBAAO,CAAC,kBAAM;AACzB,aAAa,mBAAO,CAAC,sBAAQ;AAC7B,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtFA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;;;;;;;;;;;;;;;;ACtBAxC,mBAAO,CAAC,oDAAD,CAAP;;AACA,IAAM2C,OAAO,GAAG3C,mBAAO,CAAC,wBAAD,CAAvB;;AACA,IAAM4C,IAAI,GAAG5C,mBAAO,CAAC,kBAAD,CAApB;;AACA,IAAM6C,EAAE,GAAE7C,mBAAO,CAAC,cAAD,CAAjB;;AACA,IAAMzB,IAAI,GAAGyB,mBAAO,CAAC,kBAAD,CAApB;;AAEA,IAAM8C,MAAM,GAAGH,OAAO,EAAtB;AACA,IAAMI,IAAI,GAAG,IAAb;;AAEA,IAAMb,aAAa,GAAGlC,mBAAO,CAAC,kDAAD,CAA7B;;AACA,eAAkBA,mBAAO,CAAC,sCAAD,CAAzB;AAAA,IAAQ0C,KAAR,YAAQA,KAAR;;AACA,gBAII1C,mBAAO,CAAC,4CAAD,CAJX;AAAA,IACEmB,0BADF,aACEA,0BADF;AAAA,IAEEK,UAFF,aAEEA,UAFF;AAAA,IAEcQ,eAFd,aAEcA,eAFd;AAAA,IAGEP,UAHF,aAGEA,UAHF;AAAA,IAGcC,UAHd,aAGcA,UAHd;AAAA,IAG0BG,UAH1B,aAG0BA,UAH1B;;AAMAiB,MAAM,CAACE,OAAP,CAAe,GAAf,EAAoBJ,IAAI,EAAxB;AACAE,MAAM,CAACG,GAAP,CAAWN,OAAO,CAACO,IAAR,EAAX;AACAJ,MAAM,CAACG,GAAP,CAAWN,OAAO,CAACQ,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAG;AAAb,CAAnB,CAAX;AACAN,MAAM,CAACG,GAAP,CAAWN,OAAO,UAAP,CAAepE,IAAI,CAACU,OAAL,CAAaoE,SAAb,EAAwB,QAAxB,CAAf,CAAX;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAMC,GAAN,EAAc;AAChC,MAAG,CAACD,GAAG,CAACE,KAAR,EAAe,OAAOD,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB5C,GAAhB,EAAP;AAEf4B,EAAAA,KAAK,CAACjJ,QAAN,CAAe0H,0BAA0B,CAACoC,GAAG,CAACE,KAAL,CAAzC;AACA,qBAAwBf,KAAK,CAAC7J,KAA9B;AAAA,MAAQ6C,IAAR,gBAAQA,IAAR;AAAA,MAAcY,KAAd,gBAAcA,KAAd;AAEAkH,EAAAA,GAAG,CAACN,IAAJ,CAAS;AAAEpH,IAAAA,EAAE,EAAG0F,UAAU,CAACkB,KAAK,CAAC7J,KAAP,CAAjB;AAAgC6C,IAAAA,IAAI,EAAJA,IAAhC;AAAsCY,IAAAA,KAAK,EAALA;AAAtC,GAAT;AACD,CAPD;;AASA,IAAMqH,WAAW;AAAA,qEAAG,iBAAOJ,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,gBACbD,GAAG,CAACK,IADS;AAAA;AAAA;AAAA;;AAAA,6CACKJ,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB5C,GAAhB,EADL;;AAAA;AAElB4B,YAAAA,KAAK,CAACjJ,QAAN,CAAe8J,GAAG,CAACK,IAAnB;AAFkB,6CAGXJ,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgB5C,GAAhB,EAHW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAX6C,WAAW;AAAA;AAAA;AAAA,GAAjB;;AAMAb,MAAM,CAAC3K,GAAP,CAAW,GAAX;AAAA,sEAAgB,kBAAOoL,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAEdd,YAAAA,KAAK,CAACjJ,QAAN,CAAeuI,eAAe,EAA9B;AACM6B,YAAAA,UAHQ,GAGK,WAAWrC,UAAU,CAACkB,KAAK,CAAC7J,KAAP,CAH1B;AAAA,8CAKP2K,GAAG,CAACM,QAAJ,CAAaD,UAAb,CALO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAAA;AAAA;AAAA;AAAA;AAQAf,MAAM,CAAC3K,GAAP,CAAW,OAAX;AAAA,sEAAoB,kBAAOoL,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAElB,gBAAI,CAACd,KAAK,CAAC7J,KAAX,EAAmB6J,KAAK,CAACjJ,QAAN,CAAeuI,eAAe,EAA9B;AACb+B,YAAAA,QAHY,GAGD,UAAUvC,UAAU,CAAC+B,GAAG,CAACE,KAAL,CAHnB;AAIZO,YAAAA,OAJY,GAIFzF,IAAI,CAACU,OAAL,CAAaoE,SAAb,EAAuB,wBAAvB,EAAkD,WAAUU,QAAV,GAAoB,OAAtE,CAJE;AAAA;AAAA,mBAMD7B,aAAa,CAAC;AAAE5E,cAAAA,GAAG,EAAG,GAAR;AAAazE,cAAAA,KAAK,EAAG6J,KAAK,CAAC7J,KAA3B;AAAkC6D,cAAAA,KAAK,EAAG;AAA1C,aAAD,CANZ;;AAAA;AAMduH,YAAAA,IANc;AAAA;AAAA,mBAOZpB,EAAE,CAACqB,aAAH,CAAiBF,OAAjB,EAA0BC,IAA1B,CAPY;;AAAA;AAAA,8CASXT,GAAG,CAACW,IAAJ,CAASF,IAAT,CATW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAAA;AAAA;AAAA;AAAA;AAYAnB,MAAM,CAAC3K,GAAP,CAAW,cAAX;AAAA,sEAA2B,kBAAOoL,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjB9G,YAAAA,KAFiB,GAEP6G,GAAG,CAACE,KAFG,CAEjB/G,KAFiB;AAAA;AAAA,mBAGJwF,aAAa,CAAC;AAAE5E,cAAAA,GAAG,EAAG,cAAR;AAAwBzE,cAAAA,KAAK,EAAG6J,KAAK,CAAC7J,KAAtC;AAA6C6D,cAAAA,KAAK,EAALA;AAA7C,aAAD,CAHT;;AAAA;AAGnB0F,YAAAA,MAHmB;AAAA,8CAKlBoB,GAAG,CAACW,IAAJ,CAAS/B,MAAT,CALkB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA3B;;AAAA;AAAA;AAAA;AAAA;AAQAU,MAAM,CAAC3K,GAAP,CAAW,YAAX;AAAA,sEAAyB,kBAAOoL,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAEjB9G,YAAAA,KAFiB,GAEP6G,GAAG,CAACE,KAFG,CAEjB/G,KAFiB;AAAA;AAAA,mBAGFwF,aAAa,CAAE;AAAE5E,cAAAA,GAAG,EAAG,YAAR;AAAsBzE,cAAAA,KAAK,EAAG6J,KAAK,CAAC7J,KAApC;AAA4C6D,cAAAA,KAAK,EAALA;AAA5C,aAAF,CAHX;;AAAA;AAGjB0F,YAAAA,MAHiB;AAAA,8CAKhBoB,GAAG,CAACW,IAAJ,CAAS/B,MAAT,CALgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAzB;;AAAA;AAAA;AAAA;AAAA;AAQAU,MAAM,CAAC3K,GAAP,CAAW,YAAX,EAAyBmL,WAAzB;AACAR,MAAM,CAACsB,GAAP,CAAW,YAAX,EAAyBT,WAAzB;AAEAb,MAAM,CAACuB,IAAP,CAAY,YAAZ,EAA0B,UAACd,GAAD,EAAMC,GAAN,EAAc;AAEtC,MAAGD,GAAG,CAACK,IAAJ,CAAS9H,EAAT,KAAgB,EAAnB,EAAsB;AACpB,QAAG,CAAC4F,UAAU,CAAC6B,GAAG,CAACK,IAAL,CAAd,EACE,OAAOJ,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBS,IAAhB,CAAqB,uBAArB,CAAP;AAEFzB,IAAAA,KAAK,CAACjJ,QAAN,CAAgB0H,0BAA0B,CACxC;AAAEhG,MAAAA,MAAM,EAAG,EAAX;AAAeK,MAAAA,KAAK,EAAG,KAAvB;AAA8B1C,MAAAA,IAAI,EAAG,EAArC;AAA0CuD,MAAAA,IAAI,EAAG,CAAjD;AAAoDf,MAAAA,IAAI,EAAG;AAA3D,KADwC,CAA1C;AAIA,WAAOkI,GAAG,CAACN,IAAJ,CAASR,KAAK,CAAC7J,KAAf,CAAP;AACD;;AAED,MAAI,CAAC4I,UAAU,CAAC8B,GAAG,CAACK,IAAL,CAAf,EACE,OAAOJ,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBS,IAAhB,CAAqB,uBAArB,CAAP;AAEF,MAAMrL,IAAI,GAAG4J,KAAK,CAAC7J,KAAN,CAAYC,IAAZ,KAAqB,EAArB,GAA0ByK,GAAG,CAACK,IAAJ,CAAS5H,MAAnC,GAA4C,EAAzD;AACA0G,EAAAA,KAAK,CAACjJ,QAAN,CAAe;AAAEX,IAAAA,IAAI,EAAJA;AAAF,GAAf;AACA4J,EAAAA,KAAK,CAACjJ,QAAN,CAAgB0H,0BAA0B,CAACuB,KAAK,CAAC7J,KAAP,CAA1C;AAEA,SAAO2K,GAAG,CAACN,IAAJ,CAASR,KAAK,CAAC7J,KAAf,CAAP;AACD,CArBD;AAuBAiK,MAAM,UAAN,CAAc,cAAd,EAA8B,UAACS,GAAD,EAAKC,GAAL,EAAa;AAEzC,MAAI,CAAC3B,UAAU,CAAC0B,GAAG,CAACE,KAAJ,CAAU3H,EAAX,CAAf,EACE,OAAO0H,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBS,IAAhB,CAAqB,uBAArB,CAAP;AAEFzB,EAAAA,KAAK,CAACjJ,QAAN,CAAgB0H,0BAA0B,CACxC;AAAEhG,IAAAA,MAAM,EAAG,EAAX;AAAeK,IAAAA,KAAK,EAAG,KAAvB;AAA8B1C,IAAAA,IAAI,EAAG,EAArC;AAA0CuD,IAAAA,IAAI,EAAG,CAAjD;AAAoDf,IAAAA,IAAI,EAAG;AAA3D,GADwC,CAA1C;AAIA,SAAOkI,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqBR,KAAK,CAAC7J,KAA3B,CAAP;AACD,CAVD;AAaAiK,MAAM,CAACwB,MAAP,CAAcvB,IAAd,EAAoB,YAAK;AACvBwB,EAAAA,OAAO,CAACC,GAAR,CAAY,8BAA4BzB,IAAxC;AACD,CAFD","sources":["webpack://server/SSR/webpack/bootstrap","webpack://server/SSR/webpack/runtime/define property getters","webpack://server/SSR/webpack/runtime/hasOwnProperty shorthand","webpack://server/SSR/webpack/runtime/make namespace object","webpack://server/SSR/./src/lib/Component.js","webpack://server/SSR/./src/views/PostListPage.js","webpack://server/SSR/./src/views/router.js","webpack://server/SSR/./src/views/PostSingle.js","webpack://server/SSR/./src/views/NotFoundPage.js","webpack://server/SSR/./src/views/PostEditPage.js","webpack://server/SSR/./src/views/App.js","webpack://server/SSR/./src/initRouter.js","webpack://server/SSR/./src/lib/Router.js","webpack://server/SSR/./ssr.js","webpack://server/./src/Data.js","webpack://server/./src/executor.js","webpack://server/./src/ssr.service.js","webpack://server/./src/store.js","webpack://server/./node_modules/console-browserify/index.js","webpack://server/external commonjs \"assert\"","webpack://server/external commonjs \"core-js/modules/es.array.concat.js\"","webpack://server/external commonjs \"core-js/modules/es.array.fill.js\"","webpack://server/external commonjs \"core-js/modules/es.array.filter.js\"","webpack://server/external commonjs \"core-js/modules/es.array.for-each.js\"","webpack://server/external commonjs \"core-js/modules/es.array.from.js\"","webpack://server/external commonjs \"core-js/modules/es.array.includes.js\"","webpack://server/external commonjs \"core-js/modules/es.array.is-array.js\"","webpack://server/external commonjs \"core-js/modules/es.array.iterator.js\"","webpack://server/external commonjs \"core-js/modules/es.array.join.js\"","webpack://server/external commonjs \"core-js/modules/es.array.map.js\"","webpack://server/external commonjs \"core-js/modules/es.array.reverse.js\"","webpack://server/external commonjs \"core-js/modules/es.array.slice.js\"","webpack://server/external commonjs \"core-js/modules/es.array.splice.js\"","webpack://server/external commonjs \"core-js/modules/es.date.to-iso-string.js\"","webpack://server/external commonjs \"core-js/modules/es.date.to-string.js\"","webpack://server/external commonjs \"core-js/modules/es.function.bind.js\"","webpack://server/external commonjs \"core-js/modules/es.function.name.js\"","webpack://server/external commonjs \"core-js/modules/es.json.to-string-tag.js\"","webpack://server/external commonjs \"core-js/modules/es.math.to-string-tag.js\"","webpack://server/external commonjs \"core-js/modules/es.number.constructor.js\"","webpack://server/external commonjs \"core-js/modules/es.object.create.js\"","webpack://server/external commonjs \"core-js/modules/es.object.define-properties.js\"","webpack://server/external commonjs \"core-js/modules/es.object.define-property.js\"","webpack://server/external commonjs \"core-js/modules/es.object.entries.js\"","webpack://server/external commonjs \"core-js/modules/es.object.get-own-property-descriptor.js\"","webpack://server/external commonjs \"core-js/modules/es.object.get-own-property-descriptors.js\"","webpack://server/external commonjs \"core-js/modules/es.object.get-prototype-of.js\"","webpack://server/external commonjs \"core-js/modules/es.object.keys.js\"","webpack://server/external commonjs \"core-js/modules/es.object.set-prototype-of.js\"","webpack://server/external commonjs \"core-js/modules/es.object.to-string.js\"","webpack://server/external commonjs \"core-js/modules/es.promise.js\"","webpack://server/external commonjs \"core-js/modules/es.reflect.construct.js\"","webpack://server/external commonjs \"core-js/modules/es.regexp.exec.js\"","webpack://server/external commonjs \"core-js/modules/es.string.includes.js\"","webpack://server/external commonjs \"core-js/modules/es.string.iterator.js\"","webpack://server/external commonjs \"core-js/modules/es.string.search.js\"","webpack://server/external commonjs \"core-js/modules/es.string.split.js\"","webpack://server/external commonjs \"core-js/modules/es.symbol.description.js\"","webpack://server/external commonjs \"core-js/modules/es.symbol.iterator.js\"","webpack://server/external commonjs \"core-js/modules/es.symbol.js\"","webpack://server/external commonjs \"core-js/modules/es.symbol.to-string-tag.js\"","webpack://server/external commonjs \"core-js/modules/web.dom-collections.for-each.js\"","webpack://server/external commonjs \"core-js/modules/web.dom-collections.iterator.js\"","webpack://server/external commonjs \"cors\"","webpack://server/external commonjs \"express\"","webpack://server/external commonjs \"global-jsdom/register\"","webpack://server/external commonjs \"regenerator-runtime/runtime.js\"","webpack://server/external commonjs \"util\"","webpack://server/external node-commonjs \"fs\"","webpack://server/external node-commonjs \"path\"","webpack://server/webpack/bootstrap","webpack://server/./server.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","class Component{\n  \n  el; components; child; firstBonder; secondBonder; name; curPos; oldPos; root; state\n\n  constructor({ name, state }){\n    this.components=[];\n    this.child =[];\n    this.name = name;\n    this.state = state;\n    this.curPos = 0;\n    this.oldPos = 0;    \n    \n    this.firstBonder = this.eventHandler.bind(this);\n    this.secondBonder = this.secondEventHandler.bind(this);\n  }\n  \n  setState(state){\n    this.state = state; // for serverside rendering\n    // console.log('=========================this.state, this.curPos',this.state, this.curPos)\n    if(this.components.length > 0){\n      this.components[this.curPos].setState(state)\n    }\n    if(this.child.length > 0){\n      this.child.map(node => node.setState(state))\n    }\n  }\n  setRoot(root){\n    if(!this.root)  this.root = root;\n    this.el =  this.root.querySelector(`#${this.name}`);\n    // console.log(\"setRooooot=\", this.root, this.el, this.name)\n    \n    if(this.components.length > 0){\n      this.components[this.curPos].setRoot(root);\n    }\n\n    if(this.child.length > 0){\n      this.child.map(node => node.setRoot(root));\n    }\n    // console.log(root, 'setRoot', this.el)\n    this.setEvent();\n  }\n  \n  setEvent(){\n  }\n\n  eventHandler(){\n\n  }\n\n  secondEventHandler(){\n    \n  }\n\n  template(){\n    let renderHtml='';\n    if(this.components.length > 0){\n      renderHtml = this.components[this.curPos].template();\n      // console.log('this app name=', this.name, this.state, renderHtml)\n\n    } \n\n    if(this.child.length > 0){\n      renderHtml = this.child.map(node => node.template()).join('')\n    }\n\n    return `\n      <div id=${this.name}>\n        ${renderHtml}\n      </div>\n    `;\n\n  }\n  \n  render(){\n    // this.child.map(node => node.render())\n\n    this.el.innerHTML= this.template() //(should be oldOne after diff);\n    requestAnimationFrame(()=> this.setRoot())\n      // console.log(\"rendering here =\", this.name, this.el)\n\n  }\n\n}\n\nexport default Component","import Component from '../lib/Component.js';\n\nexport class PostListPage extends Component{\n  \n  constructor({ name, state }){\n    super({ name, state })\n    this.child = [] \n    this.child.push(new PostListHeader({ name : 'postlistheader', state }))\n    this.child.push(new Postlist({ name : 'postlist' , state }))\n    this.child.push(new PageButton({ name : 'pagebutton', state }))\n  }\n  \n}\n\nexport class PostListHeader extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    this.child = []\n    this.child.push( new Search({ name : 'search' , state }) )\n    this.child.push( new Paging( { name :'paging', state  }) )\n    this.child.push( new Sorting( { name : 'sorting', state }) )\n    this.child.push( new SortButton( { name : 'sortbutton', state }) )\n\n  }\n\n}\n\nexport class Search extends Component{\n\n\n   template(){\n    const keyword = this.state.filter\n    return `\n    <div data-component=\"search\" id=\"search\">\n      <input \n        data-action='searchInput' \n        placeholder=\"search\" \n        type=\"text\" \n        value=${keyword? keyword : \"\"}>\n      <button data-action='searchBtn'>검색</button>\n    </div>\n  `;\n  } \n\n}\n\nexport class Paging extends Component {\n\n\n  template(){\n    const select = Number(this.state.size)\n    return `\n      <div data-component=paging id=\"paging\">\n        <label for=\"pagination\" value=${select}>페이지</label>\n          <select data-action =\"page\">\n          <option value=5 ${select === 5? \"selected\" : \"\"}>5</option>\n          <option value=10 ${select === 10? \"selected\" : \"\"}>10</option>\n          <option value=20 ${select === 20? \"selected\" : \"\"}>20</option>\n        </select>\n      </div>\n    `;\n  }\n\n}\n\nexport class Sorting extends Component{\n\n\n  template(){\n    const selected = this.state.order\n    return `\n    <div data-component='sorting' id=\"sorting\">\n      <label for=\"sorting\">날짜정렬</label>\n      <select data-action=\"order\">\n        <option \n            name='order' value=\"dsc\" \n            ${selected === 'dsc'? \"selected\" : \"\"}>최신</option>\n        <option \n            name='order' value=\"asc\"\n            ${selected === 'asc'? \"selected\" : \"\"}>예전</option>\n      </select>\n    </div>`\n    ;\n  }\n\n}\n\nexport class SortButton extends Component{\n\n  template(){\n    return `\n      <div id=\"sortbutton\">\n        <button data-action = 'all' id=\"refreshall\">초기화</button>\n        <button data-action = 'page' id=\"refreshpage\">새로고침</button>\n      </div>\n    `;\n  }\n\n}\n\n\nexport class Postlist extends Component{\n\n\n  template(){\n    \n    const items = this.state.data\n    const classOn = this.state.name !== '' ?`class='writer-on'` : \"\" \n\n    return `\n    \n      <div id='postlist'>\n        <ul>\n          <li>글번호</li>\n          <li data-action='title'>제목</li>\n          <li>작성자</li>\n          <li>작성일</li>\n        </ul>\n        ${ items.length === 0 ? \"\" : \n          items.map( (item, idx) => `\n          <ul data-index=${item.id}>  \n            <li id= ${item.id}>${item.id}</li>\n            <li data-action='title'>${item.title}</li>\n            <li data-action='writer' ${classOn} >${item.writer}</li>\n            <li>${item.date.split('T')[0]}</li>\n          </ul>`)\n          .join(\"\")\n        }\n      </div>`\n  }\n}\n\nclass PageButton extends Component{\n\n  constructor({ name, state }){\n    super({ name, state });\n    this.child = []; \n    this.child.push( new Pagination({ name :'pagination-button', state }) );\n    this.child.push( new PostButton({ name :'postbutton', state }) );\n  }\n\n}\n\nexport class PostButton extends Component{\n\n  template(){\n    return `\n      <div id=postbutton>\n        <button>글 작성</button>\n      </div>\n    `\n  }\n  \n}\n\n\nexport class Pagination extends Component{\n\n  page; group\n\n  template(){\n    const { page, size, total, data } =  this.state;\n    const less = Number(page) > 1;\n    const more = Number(size)*Number(page) < Number(total) ;\n    // console.log('postListPage============', this.state)\n\n    return `\n      <div id=pagination-button>\n      ${ Number(total) === 0 ? `<span class=\"none-display\">\"게시글이 존재 하지 않습니다.\"</span>` : \"\"}\n      ${ less ? `<button data-action=\"less\">이전</button>` : \"\" }\n      ${ more ? `<button data-action=\"more\">더보기</button>` : \"\" }\n      ${ Number(total) && !more ? `<span class=\"none-display\">\"마지막 페이지 입니다\"</span>` : \"\" }\n      </div>\n    `\n  }\n\n}\n"," const viewRouter = {\n  index : 0 , \n  setIndex(index){\n    this.index = index\n  }\n}\n\nexport default viewRouter","import Component from '../lib/Component.js'\nimport viewRouter from './router';\n\nexport class PostSinglePage extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    // this.root = root;\n    this.child = [];\n    this.child.push( new Header({ name : 'header', state }))\n    this.child.push( new Contents({ name : 'contents', state }))\n    this.child.push( new BottomButton({ name : 'bottombutton', state }))\n\n  }\n}\n\n\nexport class Header extends Component{\n  \n\n  template(){\n    // console.log(viewRouter, this.state)\n\n    const index = viewRouter.index \n    const data = this.state.data.filter(ele => ele.id  === Number(index))[0]\n\n    return `\n      <header id=\"header\">\n        <div class='single-header'>\n          <span>글번호</span>\n          <span>제목</span>\n          <span>작성자</span>\n          <span>날짜</span>\n        </div>\n        ${ \n          !data || data.length === 0 \n            ? \"\"\n            :`<div class='single-content'>\n              <span>${ data.id }</span>\n              <span>${ data.title }</span>\n              <span>${ data.writer }</span>\n              <span>${ data.date.split('T')[0] }</span>\n            </div>`\n        }\n      </header>\n    `\n  }\n\n}\n\nexport class Contents extends Component{\n\n\n  template(){\n    const index = viewRouter.index \n    const data = this.state.data.filter(ele => ele.id  === Number(index))[0];\n\n    return `\n      <div id=\"contents\">\n        ${ !data || data.length === 0 \n          ? \"<div> 게시글이 존재하지 않습니다.</div>\" \n          : `<textarea cols=\"50\" rows=\"20\" name ='content' readonly>${data.content}</textarea>`\n        }\n      </div>\n    `;  \n  }\n}\n\nexport class BottomButton extends Component{\n  \n  template(){\n    return `\n      <div id=\"bottombutton\">\n      <button data-action=\"list\">목록</button>\n        <button data-action=\"edit\">수정</button>\n        <button data-action=\"delete\">삭제</button>\n      </div>\n    `;\n  }\n\n}\n","import Component from \"../lib/Component\";\n\nexport class NoutFoundPage extends Component{\n  \n  constructor({ name, state }){\n    super({ name, state })\n  }\n\n  template(){\n    return `\n    <div id=\"notfoundpage\">NOT FOUND PAGE \n        <p>요청하신 페이지를 찾을 수 없습니다. </p>\n        <button>홈으로 돌아가기</button>\n    </div>\n    `;\n  }\n}\n","import Component from '../lib/Component.js'\nimport viewRouter from './router';\n\nexport class PostEditPage extends Component{\n  \n  child; \n\n  constructor({ name, state }){\n    super({ name, state })\n    // this.root = root;\n    this.child = [];\n    this.child.push( new Contents({ name : 'contents', state }))\n\n  }\n\n}\n\n\nexport class Contents extends Component{\n\n  template(){\n\n    let index; data;\n\n    if(viewRouter.index){\n      index = viewRouter.index \n      data = this.state.data.filter(ele => ele.id  === Number(index))[0]\n    }\n    data = null;\n\n    return `\n      <div id=\"contents\">\n        <form action='/api/post' method='post' id='form'>\n          <fieldset>\n            <p name=${data ? data.id: \"\"}> 제 목\n              <input \n              data-action='title'\n              type='text',\n              name = 'title'\n              value=${ data ? data.title : \"\"}\n              >\n            </p>\n            <p> 작성자\n              <input\n              data-action='writer'\n              type='text'\n              name='writer'\n              value=${ data? data.writer : \"\"}\n              >\n            </p> \n            <textarea data-action = 'contents' cols=\"50\" rows=\"20\" name ='content'>${ data ? data.content : \"\"}</textarea>\n            <input style=\"display:none;\" name=id value = ${ data ? data.id : \"\"} >\n            <button data-action='submit'>제출</button>\n          </fieldset>\n        </form>\n      </div>\n    `;  \n  }\n  \n}","import  Component  from \"../lib/Component.js\";\nimport { PostListPage } from \"./PostListPage.js\";\nimport { PostSinglePage } from \"./PostSingle.js\";\nimport { NoutFoundPage } from './NotFoundPage.js';\nimport { PostEditPage } from './PostEditPage.js'\n\nclass App extends Component{\n\n  constructor({ name, state }){\n    super({ name, state })\n    this.components.push(new PostListPage({ name : 'postlistpage' , state}));\n    this.components.push(new PostSinglePage({ name :'postsingle', state }));\n    this.components.push(new PostEditPage({ name :'posteditpage', state }));\n    this.components.push(new NoutFoundPage({ name :'notfoundpage', state }));\n  }\n\n}\n\nexport default new App({ name : 'app'})","import Router from \"./lib/Router\";\n\nconst initRouter = (url, app, serverSide=false) => {\n \n  const router = new Router();\n\n  router.subscribe(app);\n  router.setRoutes( \n    [\n      { path : '/',\n        comPosition : 0 \n      },\n      { path : '/post-single',\n        comPosition : 1\n      },\n      { path : '/post-edit',\n        comPosition : 2\n      },\n      { \n        path : '/nout-found',\n        comPosition : 3\n      }\n    ] \n  )\n  \n  if( !serverSide ){\n    // router.setPathCur(url)  \n    router.setRoot(document.querySelector('#root') );\n  }\n\n  return router\n}\n\nexport default initRouter\n","class Router {\n  \n  routes; base; index; root; app; cur; eventBounder;\n  \n  constructor(){\n\n    this.cur = 0;\n    this.routeState = { value : \"\" };\n\n  }\n  \n  subscribe(app){\n    this.app = app;\n  }\n\n  setRoutes( routes ){\n    this.routes = routes\n  }\n\n  setRoot(root){\n    if(!this.root && !root) this.root = document.querySelector('#root')\n    if(!this.root) this.root = root \n    // console.log(this.root)\n    try{\n      this.app.setRoot(this.root);\n      this.app.onLoad();\n      // this.app.setEvent();\n\n    }catch(err){\n      if(err instanceof TypeError){ \n        return this.serverRender()\n      }\n    }\n  }\n\n\n  setIndex(index){\n    this.index =Number(index)\n  }\n  \n  setPathCur(newCur, serverRender=false){\n\n    newCur = newCur === '/list' ? '/' : newCur\n    this.cur = this.routes.filter( \n      route => route.path === newCur )[0].comPosition;\n    \n    this.app.curPos = this.cur; \n\n    if( !serverRender ){\n      if(location.search.includes('index')){\n        this.setIndex(location.search.split('=')[1])\n      }\n      this.templateRender()\n    }\n\n  }\n\n  templateRender(){\n    this.root.innerHTML = this.app.template();\n    this.setRoot(this.root)\n  }\n  \n  serverRender(){\n    // console.log('asdfasdfasdfdsa=========', this.app.state)\n    return this.app.template();\n  }\n}\n\nexport default Router;","import app from './src/views/App.js'\nimport viewRouter from './src/views/router.js';\nimport initRouter from './src/initRouter.js';\n\nexport function ssr_converter (context) {\n  return new Promise(async (resolve, reject) => {\n\n    let { url, state, index } = context;\n    let ssr_html; \n\n    const router = initRouter(url, app, true);\n\n    try{\n      app.setState(state);\n      router.setPathCur(url, true)\n\n      if(router.cur === 1 || router.cur === 2){\n        viewRouter.setIndex(Number(index));\n      } \n\n      ssr_html= router.serverRender();\n\n    }catch(err){\n      router.setPathCur('/nout-found', true);\n      ssr_html = router.serverRender();\n    }\n\n    return  ssr_html \n    ? resolve( ssr_html ) \n    : reject( new Error('SSR error') );\n  })\n}\n","const ref = [0, 31, 59, 90, 120, 151, 182]\nconst  setData = (dataLength = 30) => {\n  return new Array(dataLength).fill(0).map((ele, idx) => {\n    let day = idx + 1 \n    const mon = day <= 31 ? 1 : day <= 59 ? 2 : day <= 90 \n      ? 3 : day <= 120 ? 4 : day <= 151 ? 5 : day <= 182 ? 6 : 7\n    return {\n      id : idx+1, \n      title : `title${idx+1}`,\n      writer : `name${idx+1}`,\n      content : `content${idx+1}`,\n      date : `2021-${mon}-${day-ref[mon-1]}`\n    }\n  })\n}\nlet totData = setData(200)\n\nmodule.exports = totData\n\n  \n\n","let tem = require('./Data.js')\nlet totData = tem; \n\nlet initialState = {\n  data : totData.slice().reverse().slice(0,5),\n  page : 1,\n  size : 5, \n  order : 'dsc',\n  filter : '',\n  name : '',\n  total : totData.length,\n  index : 0\n}\n\n// ---- Query executor ---- \nconst queryExecutor = {\n\n  // SELECT * FROM _ WHERE all culumn LIKE '%keyword%' \n  filterByKeyWord : (keyword, data=totData) => {\n    // filter by search keyworkd\n    // console.log(\"datata\", data)\n    return keyword === \"\" \n    ? data \n    : data.filter( ele =>{\n        let bool = false \n        for(let [ key,val ] of Object.entries(ele)){\n          if(key === 'id' || key ==='date' || key === 'index') continue\n          // console.log( val, keyword)\n          if(!String(val).includes(keyword)) continue \n          bool = true \n          // console.log(ele) \n          break\n        }\n        return bool\n    })\n  },\n\n  // SELECT * FROM _ WHERE writer = name\n  filterByName : (name, data) => {\n    // filter by writer name\n    // console.log(\"datata\", data)\n\n    return  name === \"\" \n    ? data \n    : data.filter( ele =>{\n        let bool = false \n        for(let [ key,val ] of Object.entries(ele)){\n          if(key === 'writer' && String(val) === name ){\n            bool = true\n            break\n          }\n        }\n        return bool\n    })\n  },\n\n  // LIMIT & OFFSET \n  setRange : (page, size, offset, end) => {\n    // set view data range  \n    let _from = (page - 1) * size - offset; \n    _from = _from < 0 ? 0 : _from; \n\n    let _to = _from + size + offset;\n    _to = _to >= end ? end : _to; \n    // console.log(page, size, _from, _to)\n    return [_from, _to, end] \n  },\n  \n  // ORDER BY & INDEX\n  setIndexData : (order, _data) => {\n    _data = order === 'dsc' ? _data.reverse() : _data\n    \n    return _data.slice()\n      .map((item, idx) => {\n      item['index'] = idx\n      return item\n    })\n  }\n}\nmodule.exports = {\n  updateStateByQueryExecutor  : (state) =>{\n    let{ filter, name, order, page, size, data, total } = state \n  \n    page = Number(page); size= Number(size);\n    // console.log(\"executor=\", page, size, filter, name, order, data)\n    let filtered = queryExecutor.filterByKeyWord(filter);\n    // console.log(filtered)\n    \n    filtered = queryExecutor.filterByName(name, filtered);\n    // console.log(filtered)\n    \n    let [ from, to ] = queryExecutor.setRange(page, size, 0, filtered.length);\n  \n    let totFilterData = queryExecutor.setIndexData(order, filtered.slice());\n    data = totFilterData.slice(from, to);\n    total = totFilterData.length; \n  \n    state = { ...state, data, total }\n    // console.log(state)\n    return state \n  },\n  getPathURL : (state) => {\n    const { filter, name, order, data, total, page, size } = state\n    const id = `filter=${filter}&name=${name}&order=${order}&page=${page}&size=${size}`\n    \n    return id\n  },\n\n  updatePost : ( { writer, title , content, id } )=>{\n    // console.log(\"id===========\", id)\n    totData = totData.map( ele => {\n\n      if( Number(ele.id) === Number(id) ) {\n        ele.writer = writer; \n        ele.title = title\n        ele.content = content;\n      }\n      return ele\n    })\n    // console.log(totData[ totData.length-1 ])\n    return totData \n  },\n\n  createPost : ( { writer, title, content } ) =>{\n    const id = totData[totData.length -1].id + 1;\n    totData.push({\n      id, writer, title, content, date: new Date().toISOString()\n    })\n    return totData\n  },\n\n  deletePost : ( id ) => {\n    for(let i = 0 ; i < totData.length ; i++){\n      if( totData[i].id === Number(id) ) totData.splice(i,1);\n    }\n    return totData;\n  }\n  ,\n  getInitialState : () => {\n    initialState.data = totData.slice().reverse().slice(0,5)\n    return initialState\n  }\n\n}\n","const { SSR } = require('../public/ssr.js')\n\nconst getStringHtml = async (context) => {\n\n  const { state } = context\n\n  const ssrRendered = await SSR.ssr_converter(context).then(result)\n  const result = template(state, ssrRendered);\n  \n  return result \n    ? result\n    : template(state, null) \n}\n\n\nconst template = (state, ssr_html) => {\n  return `\n  <!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Document</title>\n  <script>window.state=${JSON.stringify(state)}</script>\n</head>\n<body>\n  <div id='root'>\n    ${ssr_html ? ssr_html : \"\"} \n  </div>\n  <script src=\"./csr.js\"></script>\n</body>\n</html>\n  `\n}\n\nmodule.exports = getStringHtml\n","\nclass ServerStore{\n  state; \n  constructor(state){\n    this.state = state ;\n  }\n  setState(newState){\n    this.state = { ...this.state, ...newState }\n  }\n}\n\n\n\nmodule.exports = { store  : new ServerStore()} ;\n","/*global window, global*/\nvar util = require(\"util\")\nvar assert = require(\"assert\")\nfunction now() { return new Date().getTime() }\n\nvar slice = Array.prototype.slice\nvar console\nvar times = {}\n\nif (typeof global !== \"undefined\" && global.console) {\n    console = global.console\n} else if (typeof window !== \"undefined\" && window.console) {\n    console = window.console\n} else {\n    console = {}\n}\n\nvar functions = [\n    [log, \"log\"],\n    [info, \"info\"],\n    [warn, \"warn\"],\n    [error, \"error\"],\n    [time, \"time\"],\n    [timeEnd, \"timeEnd\"],\n    [trace, \"trace\"],\n    [dir, \"dir\"],\n    [consoleAssert, \"assert\"]\n]\n\nfor (var i = 0; i < functions.length; i++) {\n    var tuple = functions[i]\n    var f = tuple[0]\n    var name = tuple[1]\n\n    if (!console[name]) {\n        console[name] = f\n    }\n}\n\nmodule.exports = console\n\nfunction log() {}\n\nfunction info() {\n    console.log.apply(console, arguments)\n}\n\nfunction warn() {\n    console.log.apply(console, arguments)\n}\n\nfunction error() {\n    console.warn.apply(console, arguments)\n}\n\nfunction time(label) {\n    times[label] = now()\n}\n\nfunction timeEnd(label) {\n    var time = times[label]\n    if (!time) {\n        throw new Error(\"No such label: \" + label)\n    }\n\n    delete times[label]\n    var duration = now() - time\n    console.log(label + \": \" + duration + \"ms\")\n}\n\nfunction trace() {\n    var err = new Error()\n    err.name = \"Trace\"\n    err.message = util.format.apply(null, arguments)\n    console.error(err.stack)\n}\n\nfunction dir(object) {\n    console.log(util.inspect(object) + \"\\n\")\n}\n\nfunction consoleAssert(expression) {\n    if (!expression) {\n        var arr = slice.call(arguments, 1)\n        assert.ok(false, util.format.apply(null, arr))\n    }\n}\n","module.exports = require(\"assert\");","module.exports = require(\"core-js/modules/es.array.concat.js\");","module.exports = require(\"core-js/modules/es.array.fill.js\");","module.exports = require(\"core-js/modules/es.array.filter.js\");","module.exports = require(\"core-js/modules/es.array.for-each.js\");","module.exports = require(\"core-js/modules/es.array.from.js\");","module.exports = require(\"core-js/modules/es.array.includes.js\");","module.exports = require(\"core-js/modules/es.array.is-array.js\");","module.exports = require(\"core-js/modules/es.array.iterator.js\");","module.exports = require(\"core-js/modules/es.array.join.js\");","module.exports = require(\"core-js/modules/es.array.map.js\");","module.exports = require(\"core-js/modules/es.array.reverse.js\");","module.exports = require(\"core-js/modules/es.array.slice.js\");","module.exports = require(\"core-js/modules/es.array.splice.js\");","module.exports = require(\"core-js/modules/es.date.to-iso-string.js\");","module.exports = require(\"core-js/modules/es.date.to-string.js\");","module.exports = require(\"core-js/modules/es.function.bind.js\");","module.exports = require(\"core-js/modules/es.function.name.js\");","module.exports = require(\"core-js/modules/es.json.to-string-tag.js\");","module.exports = require(\"core-js/modules/es.math.to-string-tag.js\");","module.exports = require(\"core-js/modules/es.number.constructor.js\");","module.exports = require(\"core-js/modules/es.object.create.js\");","module.exports = require(\"core-js/modules/es.object.define-properties.js\");","module.exports = require(\"core-js/modules/es.object.define-property.js\");","module.exports = require(\"core-js/modules/es.object.entries.js\");","module.exports = require(\"core-js/modules/es.object.get-own-property-descriptor.js\");","module.exports = require(\"core-js/modules/es.object.get-own-property-descriptors.js\");","module.exports = require(\"core-js/modules/es.object.get-prototype-of.js\");","module.exports = require(\"core-js/modules/es.object.keys.js\");","module.exports = require(\"core-js/modules/es.object.set-prototype-of.js\");","module.exports = require(\"core-js/modules/es.object.to-string.js\");","module.exports = require(\"core-js/modules/es.promise.js\");","module.exports = require(\"core-js/modules/es.reflect.construct.js\");","module.exports = require(\"core-js/modules/es.regexp.exec.js\");","module.exports = require(\"core-js/modules/es.string.includes.js\");","module.exports = require(\"core-js/modules/es.string.iterator.js\");","module.exports = require(\"core-js/modules/es.string.search.js\");","module.exports = require(\"core-js/modules/es.string.split.js\");","module.exports = require(\"core-js/modules/es.symbol.description.js\");","module.exports = require(\"core-js/modules/es.symbol.iterator.js\");","module.exports = require(\"core-js/modules/es.symbol.js\");","module.exports = require(\"core-js/modules/es.symbol.to-string-tag.js\");","module.exports = require(\"core-js/modules/web.dom-collections.for-each.js\");","module.exports = require(\"core-js/modules/web.dom-collections.iterator.js\");","module.exports = require(\"cors\");","module.exports = require(\"express\");","module.exports = require(\"global-jsdom/register\");","module.exports = require(\"regenerator-runtime/runtime.js\");","module.exports = require(\"util\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","require('global-jsdom/register')\nconst express = require('express');\nconst cors = require('cors')\nconst fs =require('fs');\nconst path = require('path')\n\nconst server = express(); \nconst PORT = 3001;\n\nconst getStringHtml = require('./src/ssr.service.js');\nconst { store } = require('./src/store.js');\nconst { \n  updateStateByQueryExecutor, \n  getPathURL, getInitialState, \n  updatePost, createPost, deletePost, \n} = require('./src/executor.js')\n\nserver.options('*', cors());\nserver.use(express.json())\nserver.use(express.urlencoded({ extended : true }))\nserver.use(express.static(path.resolve(__dirname, 'public')));\n\nconst updateCache = (req, res) => {\n  if(!req.query) return res.status(400).end();\n\n  store.setState(updateStateByQueryExecutor(req.query));\n  const { data, total } = store.state\n\n  res.json({ id : getPathURL(store.state), data, total })\n};\n\nconst updateState = async (req, res)=> {\n  if( !req.body ) return res.status(400).end(); \n  store.setState(req.body)\n  return res.status(203).end();\n}\n\nserver.get('/', async (req, res) => {\n  \n  store.setState(getInitialState()) \n  const redirectTo = `/list?` + getPathURL(store.state);\n \n  return res.redirect(redirectTo)  ;\n})\n\nserver.get('/list', async (req, res) => {\n\n  if( !store.state ) store.setState(getInitialState())\n  const filePath = 'list?' + getPathURL(req.query)\n  const fileURL = path.resolve(__dirname,'../../client/resources' , 'index_'+ filePath +'.html');\n  \n  let html = await getStringHtml({ url : '/', state : store.state, index : 0 })\n  await fs.writeFileSync(fileURL, html);\n\n  return res.send(html)\n})\n\nserver.get('/post-single', async (req, res) => {\n\n  const { index } = req.query; \n  const result = await getStringHtml({ url : '/post-single', state : store.state, index } )\n  \n  return res.send(result)\n})\n\nserver.get('/post-edit', async (req, res) => {\n\n  let { index } = req.query; \n  const result = await getStringHtml( { url : '/post-edit', state : store.state , index} )\n\n  return res.send(result)\n})\n\nserver.get('/api/cache', updateCache);\nserver.put('/api/state', updateState);\n\nserver.post('/post/edit', (req, res) => {\n\n  if(req.body.id === ''){ \n    if(!createPost(req.body) ) \n      return res.status(500).send('Internal server error');\n\n    store.setState( updateStateByQueryExecutor(\n      { filter : \"\", order : 'dsc', name : \"\",  page : 1, size : 5 }\n      )\n    )\n    return res.json(store.state)\n  }\n\n  if( !updatePost(req.body)) \n    return res.status(500).send('Internal server error');\n\n  const name = store.state.name !== '' ? req.body.writer : '';\n  store.setState({ name })\n  store.setState( updateStateByQueryExecutor(store.state) );\n\n  return res.json(store.state)\n})\n\nserver.delete('/post/delete', (req,res) => {\n\n  if( !deletePost(req.query.id) ) \n    return res.status(500).send(\"Internal server error\");\n  \n  store.setState( updateStateByQueryExecutor(\n    { filter : \"\", order : 'dsc', name : \"\",  page : 1, size : 5 }\n  ));\n  \n  return res.status(202).json(store.state);\n})\n\n\nserver.listen(PORT, ()=> {\n  console.log(\"server listning by Port= \"+PORT)\n})\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","constructor","state","name","this","components","child","curPos","oldPos","firstBonder","eventHandler","bind","secondBonder","secondEventHandler","setState","length","map","node","setRoot","root","el","querySelector","setEvent","template","renderHtml","join","render","innerHTML","requestAnimationFrame","PostListPage","super","push","PostListHeader","Postlist","PageButton","n","Search","Paging","Sorting","SortButton","filter","select","Number","size","selected","order","items","data","classOn","item","idx","id","title","writer","date","split","Pagination","PostButton","page","total","less","more","u","index","setIndex","PostSinglePage","Header","Contents","BottomButton","ele","content","NoutFoundPage","PostEditPage","w","y","url","app","serverSide","router","cur","routeState","subscribe","setRoutes","routes","document","onLoad","err","TypeError","serverRender","setPathCur","newCur","route","path","comPosition","location","search","includes","templateRender","ssr_converter","context","Promise","async","resolve","reject","f","ssr_html","Error","ref","setData","dataLength","Array","fill","day","mon","totData","module","tem","require","initialState","slice","reverse","queryExecutor","filterByKeyWord","keyword","bool","entries","val","String","filterByName","setRange","offset","end","_from","_to","setIndexData","_data","updateStateByQueryExecutor","filtered","from","to","totFilterData","getPathURL","updatePost","createPost","Date","toISOString","deletePost","i","splice","getInitialState","SSR","getStringHtml","then","result","ssrRendered","JSON","stringify","ServerStore","newState","store","express","cors","fs","server","PORT","options","use","json","urlencoded","extended","__dirname","updateCache","req","res","query","status","updateState","body","redirectTo","redirect","filePath","fileURL","html","writeFileSync","send","put","post","listen","console","log"],"sourceRoot":""}